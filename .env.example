# ============================================================================
# SARK Application Configuration
# ============================================================================
# Copy this file to .env and customize for your environment
#
# DEPLOYMENT MODES:
# - managed: Services deployed via Docker Compose (default)
# - external: Connect to existing enterprise deployments
#
# You can mix modes - e.g., use managed PostgreSQL but external Kong
# ============================================================================

# ============================================================================
# Application Settings
# ============================================================================
ENVIRONMENT=development
DEBUG=false
LOG_LEVEL=INFO

# ============================================================================
# PostgreSQL Database Configuration
# ============================================================================
# Set POSTGRES_ENABLED=true to enable database connectivity
# Set POSTGRES_MODE to control deployment:
#   - managed: Use Docker Compose PostgreSQL (default)
#   - external: Connect to existing PostgreSQL deployment
# ============================================================================

POSTGRES_ENABLED=false
POSTGRES_MODE=managed

# PostgreSQL Connection Settings
# For managed mode: Use 'database' as host (Docker Compose service name)
# For external mode: Set to your PostgreSQL server hostname/IP
POSTGRES_HOST=database
POSTGRES_PORT=5432
POSTGRES_DB=sark
POSTGRES_USER=sark
POSTGRES_PASSWORD=sark

# PostgreSQL Advanced Settings
POSTGRES_POOL_SIZE=5
POSTGRES_MAX_OVERFLOW=10
POSTGRES_SSL_MODE=disable
# SSL modes: disable, allow, prefer, require, verify-ca, verify-full

# ============================================================================
# External PostgreSQL Example (Enterprise Deployment)
# ============================================================================
# Uncomment and modify these settings to connect to existing PostgreSQL:
#
# POSTGRES_ENABLED=true
# POSTGRES_MODE=external
# POSTGRES_HOST=postgres.example.com
# POSTGRES_PORT=5432
# POSTGRES_DB=sark_production
# POSTGRES_USER=sark_app_user
# POSTGRES_PASSWORD=your_secure_password_here
# POSTGRES_SSL_MODE=require
# POSTGRES_POOL_SIZE=20
# POSTGRES_MAX_OVERFLOW=40

# ============================================================================
# Redis Cache Configuration
# ============================================================================
# Set REDIS_ENABLED=true to enable caching
# Set REDIS_MODE to control deployment:
#   - managed: Use Docker Compose Redis (default)
#   - external: Connect to existing Redis deployment
# ============================================================================

REDIS_ENABLED=false
REDIS_MODE=managed

# Redis Connection Settings
# For managed mode: Use 'cache' as host (Docker Compose service name)
# For external mode: Set to your Redis server hostname/IP
REDIS_HOST=cache
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Redis Advanced Settings
REDIS_MAX_CONNECTIONS=50
REDIS_SSL=false

# Redis Sentinel Configuration (for HA deployments)
REDIS_SENTINEL_ENABLED=false
REDIS_SENTINEL_SERVICE_NAME=mymaster
REDIS_SENTINEL_HOSTS=
# Format: host1:port1,host2:port2,host3:port3
# Example: sentinel1.example.com:26379,sentinel2.example.com:26379,sentinel3.example.com:26379

# ============================================================================
# External Redis Example (Enterprise Deployment)
# ============================================================================
# Uncomment and modify these settings to connect to existing Redis:
#
# REDIS_ENABLED=true
# REDIS_MODE=external
# REDIS_HOST=redis.example.com
# REDIS_PORT=6379
# REDIS_DB=0
# REDIS_PASSWORD=your_redis_password_here
# REDIS_SSL=true
# REDIS_MAX_CONNECTIONS=100

# ============================================================================
# External Redis Sentinel Example (High Availability)
# ============================================================================
# Uncomment and modify for Redis Sentinel (HA) configuration:
#
# REDIS_ENABLED=true
# REDIS_MODE=external
# REDIS_SENTINEL_ENABLED=true
# REDIS_SENTINEL_SERVICE_NAME=mymaster
# REDIS_SENTINEL_HOSTS=sentinel1.example.com:26379,sentinel2.example.com:26379,sentinel3.example.com:26379
# REDIS_PASSWORD=your_redis_password_here
# REDIS_SSL=true

# ============================================================================
# Kong API Gateway Configuration
# ============================================================================
# Set KONG_ENABLED=true to enable Kong integration
# Set KONG_MODE to control deployment:
#   - managed: Use Docker Compose Kong (default)
#   - external: Connect to existing Kong deployment
# ============================================================================

KONG_ENABLED=false
KONG_MODE=managed

# Kong Connection Settings
# For managed mode: Use 'kong' as hostname (Docker Compose service name)
# For external mode: Set to your Kong server URLs
KONG_ADMIN_URL=http://kong:8001
KONG_PROXY_URL=http://kong:8000

# Kong Authentication
# For external Kong (especially in production), set an admin API key
KONG_ADMIN_API_KEY=

# Kong Workspace (Kong Enterprise only)
# Use 'default' for Kong OSS or default workspace
KONG_WORKSPACE=default

# Kong Advanced Settings
KONG_VERIFY_SSL=true
KONG_TIMEOUT=30
KONG_RETRIES=3

# Kong Database Password (for managed Kong only)
KONG_DB_PASSWORD=kong

# ============================================================================
# External Kong Example (Enterprise Deployment)
# ============================================================================
# Uncomment and modify these settings to connect to existing Kong:
#
# KONG_ENABLED=true
# KONG_MODE=external
# KONG_ADMIN_URL=https://kong-admin.example.com
# KONG_PROXY_URL=https://api.example.com
# KONG_ADMIN_API_KEY=your_kong_admin_key_here
# KONG_WORKSPACE=production
# KONG_VERIFY_SSL=true
# KONG_TIMEOUT=60
# KONG_RETRIES=5

# ============================================================================
# External Kong Enterprise Example (with RBAC)
# ============================================================================
# For Kong Enterprise with Role-Based Access Control:
#
# KONG_ENABLED=true
# KONG_MODE=external
# KONG_ADMIN_URL=https://kong-admin.example.com/production
# KONG_PROXY_URL=https://api.example.com
# KONG_ADMIN_API_KEY=your_kong_rbac_token_here
# KONG_WORKSPACE=production
# KONG_VERIFY_SSL=true

# ============================================================================
# Mixed Mode Example
# ============================================================================
# You can use managed services for some and external for others:
#
# Use managed PostgreSQL and Redis, but external Kong:
# POSTGRES_ENABLED=true
# POSTGRES_MODE=managed
# REDIS_ENABLED=true
# REDIS_MODE=managed
# KONG_ENABLED=true
# KONG_MODE=external
# KONG_ADMIN_URL=https://kong.example.com:8001
# KONG_PROXY_URL=https://kong.example.com:8000
# KONG_ADMIN_API_KEY=your_key_here

# ============================================================================
# Docker Compose Profiles
# ============================================================================
# Control which managed services to deploy:
#
# Deploy all managed services:
# docker-compose --profile full up
#
# Deploy only managed database and cache:
# docker-compose --profile managed up
#
# Deploy only Kong and its dependencies:
# docker-compose --profile kong up
#
# Deploy just the app (when using all external services):
# docker-compose up app
# ============================================================================
