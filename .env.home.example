# ============================================================================
# SARK Home Deployment Configuration
# ============================================================================
# Copy this file to .env.home and customize for your deployment.
#
# This configuration is optimized for home routers with limited resources
# (512MB RAM, single core). See docs/deployment/HOME_DEPLOYMENT.md for details.
# ============================================================================

# ============================================================================
# Operation Mode
# ============================================================================
# observe:  Log all LLM traffic, no blocking (recommended for initial setup)
# advisory: Log and alert on policy violations, no blocking
# enforce:  Log, alert, and optionally block based on policies
SARK_HOME_MODE=observe

# ============================================================================
# Application Settings
# ============================================================================
SARK_HOME_ENVIRONMENT=production
SARK_HOME_DEBUG=false
SARK_HOME_LOG_LEVEL=INFO

# ============================================================================
# Server Configuration
# ============================================================================
# Host and port for the proxy server
SARK_HOME_HOST=0.0.0.0
SARK_HOME_PORT=8443
SARK_HOME_WORKERS=1

# External port mappings (for Docker)
SARK_HOME_HTTPS_PORT=8443
SARK_HOME_HTTP_PORT=8080
SARK_HOME_HEALTH_PORT=9090

# ============================================================================
# Database Configuration
# ============================================================================
# SQLite database paths (inside container)
# These are automatically managed by Docker volumes
SARK_HOME_DB_PATH=/var/db/sark/home.db
SARK_HOME_AUDIT_DB_PATH=/var/db/sark/audit.db

# ============================================================================
# Policy Configuration
# ============================================================================
# OPA mode: embedded (recommended for home) or external
SARK_HOME_OPA_MODE=embedded

# Policy directory (inside container, mapped from data/policies)
SARK_HOME_POLICIES_DIR=/usr/local/etc/sark/policies

# External OPA URL (only used if OPA_MODE=external)
SARK_HOME_OPA_URL=http://localhost:8181

# ============================================================================
# TLS Configuration
# ============================================================================
# Enable TLS termination for HTTPS proxy
SARK_HOME_TLS_ENABLED=true

# Certificate paths (inside container, mapped from data/certs)
SARK_HOME_TLS_CERT_PATH=/usr/local/etc/sark/certs/server.crt
SARK_HOME_TLS_KEY_PATH=/usr/local/etc/sark/certs/server.key

# ============================================================================
# Resource Limits
# ============================================================================
# Maximum memory usage in MB (512MB max recommended for home routers)
SARK_HOME_MAX_MEMORY_MB=256

# Maximum concurrent connections
SARK_HOME_MAX_CONNECTIONS=50

# ============================================================================
# Audit Configuration
# ============================================================================
# Enable audit logging
SARK_HOME_AUDIT_ENABLED=true

# Audit log retention in days
SARK_HOME_AUDIT_RETENTION_DAYS=365

# Store prompt preview in audit logs (first N characters)
SARK_HOME_AUDIT_PROMPT_PREVIEW=true
SARK_HOME_AUDIT_PROMPT_PREVIEW_LENGTH=200

# ============================================================================
# Cache Configuration
# ============================================================================
# Enable in-memory caching
SARK_HOME_CACHE_ENABLED=true

# Cache size in MB
SARK_HOME_CACHE_SIZE_MB=32

# Default cache TTL in seconds
SARK_HOME_CACHE_TTL_SECONDS=300

# ============================================================================
# Alert Configuration (Advisory/Enforce modes)
# ============================================================================
# Enable alerts
SARK_HOME_ALERTS_ENABLED=false

# Email notifications (requires SMTP configuration in OPNsense)
# SARK_HOME_ALERTS_EMAIL=admin@example.com

# Pushover notifications (https://pushover.net)
# SARK_HOME_ALERTS_PUSHOVER_TOKEN=your-app-token
# SARK_HOME_ALERTS_PUSHOVER_USER=your-user-key

# ============================================================================
# Data Directory Paths (Host machine paths for Docker volume mounts)
# ============================================================================
# These are relative to the project root or absolute paths on the host
SARK_HOME_POLICIES_PATH=./data/policies
SARK_HOME_CERTS_PATH=./data/certs
SARK_HOME_CONFIG_PATH=./data/config
