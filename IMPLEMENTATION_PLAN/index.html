
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Enterprise-Grade MCP Governance System" name="description"/>
<meta content="James Henry" name="author"/>
<link href="https://sark.example.com/IMPLEMENTATION_PLAN/" rel="canonical"/>
<link href="../ROADMAP/" rel="prev"/>
<link href="../GAP_ANALYSIS/" rel="next"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.7.1" name="generator"/>
<title>Implementation Plan - SARK - Security Audit and Resource Kontroler</title>
<link href="../assets/stylesheets/main.484c7ddc.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.ab4e12ef.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
<script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#sark-implementation-plan-detailed-task-breakdown">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-color-scheme="default" data-md-component="outdated" hidden="">
</div>
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="SARK - Security Audit and Resource Kontroler" class="md-header__button md-logo" data-md-component="logo" href=".." title="SARK - Security Audit and Resource Kontroler">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            SARK - Security Audit and Resource Kontroler
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Implementation Plan
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/apathy-ca/sark" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    apathy-ca/sark
  </div>
</a>
</div>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="..">
        
  
  
    
  
  Home

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../QUICK_START/">
          
  
  
    
  
  Getting Started

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../ARCHITECTURE/">
          
  
  
    
  
  Architecture

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../DEPLOYMENT/">
          
  
  
    
  
  Deployment

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../AUTHENTICATION/">
          
  
  
    
  
  Authentication &amp; Authorization

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../OPA_POLICY_GUIDE/">
          
  
  
    
  
  Policies

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../MONITORING/">
          
  
  
    
  
  Operations

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../DATABASE_MIGRATIONS/">
          
  
  
    
  
  Database

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../PERFORMANCE_TESTING/">
          
  
  
    
  
  Performance

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../API_REFERENCE/">
          
  
  
    
  
  API Reference

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../DEVELOPMENT/">
          
  
  
    
  
  Development

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../v1.3.0/RELEASE_NOTES/">
          
  
  
    
  
  v1.3.0 Release

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../EXECUTIVE_SUMMARY/">
          
  
  
    
  
  Reports

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../REPOSITORY_IMPROVEMENT_PLAN/">
          
  
  
    
  
  Planning

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../GLOSSARY/">
          
  
  
    
  
  Reference

        </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="SARK - Security Audit and Resource Kontroler" class="md-nav__button md-logo" data-md-component="logo" href=".." title="SARK - Security Audit and Resource Kontroler">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    SARK - Security Audit and Resource Kontroler
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/apathy-ca/sark" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    apathy-ca/sark
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
<span class="md-ellipsis">
    
  
    Home
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../QUICK_START/">
<span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../QUICK_REFERENCE_SESSIONS/">
<span class="md-ellipsis">
    
  
    Quick Reference
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../installation/">
<span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../ARCHITECTURE/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../SECURITY/">
<span class="md-ellipsis">
    
  
    Security
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../PERFORMANCE/">
<span class="md-ellipsis">
    
  
    Performance
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Deployment
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            
  
    Deployment
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../DEPLOYMENT/">
<span class="md-ellipsis">
    
  
    Deployment Guide
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../DOCKER_DEPLOYMENT/">
<span class="md-ellipsis">
    
  
    Docker Deployment
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../PRODUCTION_DEPLOYMENT/">
<span class="md-ellipsis">
    
  
    Production Deployment
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../PRODUCTION_CONFIG/">
<span class="md-ellipsis">
    
  
    Production Config
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../PRODUCTION_READINESS/">
<span class="md-ellipsis">
    
  
    Production Readiness
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../DEPLOYMENT_CHECKLIST/">
<span class="md-ellipsis">
    
  
    Deployment Checklist
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../DISASTER_RECOVERY/">
<span class="md-ellipsis">
    
  
    Disaster Recovery
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ROLLBACK_PROCEDURES/">
<span class="md-ellipsis">
    
  
    Rollback Procedures
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Authentication &amp; Authorization
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            
  
    Authentication &amp; Authorization
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../AUTHENTICATION/">
<span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../AUTHORIZATION/">
<span class="md-ellipsis">
    
  
    Authorization
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../OIDC_SETUP/">
<span class="md-ellipsis">
    
  
    OIDC Setup
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../LDAP_SETUP/">
<span class="md-ellipsis">
    
  
    LDAP Setup
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../SAML_SETUP/">
<span class="md-ellipsis">
    
  
    SAML Setup
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../API_KEYS/">
<span class="md-ellipsis">
    
  
    API Keys
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Policies
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            
  
    Policies
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../OPA_POLICY_GUIDE/">
<span class="md-ellipsis">
    
  
    OPA Policy Guide
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ADVANCED_OPA_POLICIES/">
<span class="md-ellipsis">
    
  
    Advanced OPA Policies
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../POLICY_OPTIMIZATION/">
<span class="md-ellipsis">
    
  
    Policy Optimization
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../POLICY_CACHING/">
<span class="md-ellipsis">
    
  
    Policy Caching
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../POLICY_AUDIT_GUIDE/">
<span class="md-ellipsis">
    
  
    Policy Audit Guide
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../POLICY_AUDIT_TRAIL/">
<span class="md-ellipsis">
    
  
    Policy Audit Trail
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Operations
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            
  
    Operations
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../MONITORING/">
<span class="md-ellipsis">
    
  
    Monitoring
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../MONITORING_SETUP/">
<span class="md-ellipsis">
    
  
    Monitoring Setup
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../OPERATIONAL_RUNBOOK/">
<span class="md-ellipsis">
    
  
    Operational Runbook
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../OPERATIONS_RUNBOOK/">
<span class="md-ellipsis">
    
  
    Operations Runbook
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../INCIDENT_RESPONSE/">
<span class="md-ellipsis">
    
  
    Incident Response
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../TROUBLESHOOTING/">
<span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Database
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            
  
    Database
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../DATABASE_MIGRATIONS/">
<span class="md-ellipsis">
    
  
    Database Migrations
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../DATABASE_OPTIMIZATION/">
<span class="md-ellipsis">
    
  
    Database Optimization
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../VALKEY_OPTIMIZATION/">
<span class="md-ellipsis">
    
  
    Valkey Optimization
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Performance
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            
  
    Performance
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../PERFORMANCE_TESTING/">
<span class="md-ellipsis">
    
  
    Performance Testing
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../PERFORMANCE_TUNING/">
<span class="md-ellipsis">
    
  
    Performance Tuning
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../PERFORMANCE_OPTIMIZATION/">
<span class="md-ellipsis">
    
  
    Performance Optimization
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../PERFORMANCE_REPORT/">
<span class="md-ellipsis">
    
  
    Performance Report
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../POLICY_PERFORMANCE_REPORT/">
<span class="md-ellipsis">
    
  
    Policy Performance
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
<span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../API_REFERENCE/">
<span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../API_INTEGRATION/">
<span class="md-ellipsis">
    
  
    API Integration
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Development
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_11_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_11">
<span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../DEVELOPMENT/">
<span class="md-ellipsis">
    
  
    Development Guide
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../MIGRATION_GUIDE/">
<span class="md-ellipsis">
    
  
    Migration Guide
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../DEVELOPMENT_LOG/">
<span class="md-ellipsis">
    
  
    Development Log
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../TESTING_STRATEGY/">
<span class="md-ellipsis">
    
  
    Testing Strategy
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../INTEGRATION_TESTING/">
<span class="md-ellipsis">
    
  
    Integration Testing
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_12" type="checkbox"/>
<label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
<span class="md-ellipsis">
    
  
    v1.3.0 Release
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_12_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_12">
<span class="md-nav__icon md-icon"></span>
            
  
    v1.3.0 Release
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../v1.3.0/RELEASE_NOTES/">
<span class="md-ellipsis">
    
  
    Release Notes
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../v1.3.0/MIGRATION_GUIDE/">
<span class="md-ellipsis">
    
  
    Migration Guide
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_13" type="checkbox"/>
<label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="">
<span class="md-ellipsis">
    
  
    Reports
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_13_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_13">
<span class="md-nav__icon md-icon"></span>
            
  
    Reports
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../EXECUTIVE_SUMMARY/">
<span class="md-ellipsis">
    
  
    Executive Summary
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ROADMAP/">
<span class="md-ellipsis">
    
  
    Roadmap
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    
  
    Implementation Plan
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    
  
    Implementation Plan
  

    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#how-to-use-this-document">
<span class="md-ellipsis">
      
        How to Use This Document
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-2-security-hardening-core-features">
<span class="md-ellipsis">
      
        Phase 2: Security Hardening &amp; Core Features
      
    </span>
</a>
<nav aria-label="Phase 2: Security Hardening &amp; Core Features" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-1-authentication-foundation-week-1">
<span class="md-ellipsis">
      
        Sprint 1: Authentication Foundation (Week 1)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-2-api-keys-user-context-week-2">
<span class="md-ellipsis">
      
        Sprint 2: API Keys &amp; User Context (Week 2)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-3-authorization-enforcement-week-3">
<span class="md-ellipsis">
      
        Sprint 3: Authorization Enforcement (Week 3)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-4-siem-integration-week-4">
<span class="md-ellipsis">
      
        Sprint 4: SIEM Integration (Week 4)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-5-api-enhancements-week-5">
<span class="md-ellipsis">
      
        Sprint 5: API Enhancements (Week 5)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-6-health-checks-testing-week-6">
<span class="md-ellipsis">
      
        Sprint 6: Health Checks &amp; Testing (Week 6)
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-3-production-polish-deployment">
<span class="md-ellipsis">
      
        Phase 3: Production Polish &amp; Deployment
      
    </span>
</a>
<nav aria-label="Phase 3: Production Polish &amp; Deployment" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-7-8-web-ui-week-7-8">
<span class="md-ellipsis">
      
        Sprint 7-8: Web UI (Week 7-8)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-9-cli-documentation-week-8-9">
<span class="md-ellipsis">
      
        Sprint 9: CLI &amp; Documentation (Week 8-9)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-10-pilot-week-10">
<span class="md-ellipsis">
      
        Sprint 10: Pilot (Week 10)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-11-12-production-launch-week-11-12">
<span class="md-ellipsis">
      
        Sprint 11-12: Production Launch (Week 11-12)
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#task-dependencies-diagram">
<span class="md-ellipsis">
      
        Task Dependencies Diagram
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#effort-summary">
<span class="md-ellipsis">
      
        Effort Summary
      
    </span>
</a>
<nav aria-label="Effort Summary" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-2-breakdown">
<span class="md-ellipsis">
      
        Phase 2 Breakdown
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#related-documentation">
<span class="md-ellipsis">
      
        Related Documentation
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../GAP_ANALYSIS/">
<span class="md-ellipsis">
    
  
    Gap Analysis
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../PHASE2_COMPLETION_REPORT/">
<span class="md-ellipsis">
    
  
    Phase 2 Completion
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../RELEASE_NOTES_v0.2.0/">
<span class="md-ellipsis">
    
  
    Release Notes v0.2.0
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../FINAL_TEST_REPORT/">
<span class="md-ellipsis">
    
  
    Final Test Report
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../TEST_COVERAGE_REPORT/">
<span class="md-ellipsis">
    
  
    Test Coverage Report
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../KNOWN_ISSUES/">
<span class="md-ellipsis">
    
  
    Known Issues
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../LESSONS_LEARNED/">
<span class="md-ellipsis">
    
  
    Lessons Learned
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_14" type="checkbox"/>
<label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Planning
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_14_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_14">
<span class="md-nav__icon md-icon"></span>
            
  
    Planning
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../REPOSITORY_IMPROVEMENT_PLAN/">
<span class="md-ellipsis">
    
  
    Repository Improvement Plan
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../WORK_BREAKDOWN_SESSIONS/">
<span class="md-ellipsis">
    
  
    Work Breakdown Sessions
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../WORK_TASKS/">
<span class="md-ellipsis">
    
  
    Work Tasks
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../PHASE2_3WEEK_PLAN/">
<span class="md-ellipsis">
    
  
    Phase 2 3-Week Plan
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../WEEK_2_SUMMARY/">
<span class="md-ellipsis">
    
  
    Week 2 Summary
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../WEEK_3_SUMMARY/">
<span class="md-ellipsis">
    
  
    Week 3 Summary
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_15" type="checkbox"/>
<label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_15_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_15">
<span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../GLOSSARY/">
<span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../FAQ/">
<span class="md-ellipsis">
    
  
    FAQ
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../SECURITY_BEST_PRACTICES/">
<span class="md-ellipsis">
    
  
    Security Best Practices
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../SECURITY_HARDENING/">
<span class="md-ellipsis">
    
  
    Security Hardening
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../SECURITY_AUDIT/">
<span class="md-ellipsis">
    
  
    Security Audit
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../PRODUCTION_HANDOFF/">
<span class="md-ellipsis">
    
  
    Production Handoff
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#how-to-use-this-document">
<span class="md-ellipsis">
      
        How to Use This Document
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-2-security-hardening-core-features">
<span class="md-ellipsis">
      
        Phase 2: Security Hardening &amp; Core Features
      
    </span>
</a>
<nav aria-label="Phase 2: Security Hardening &amp; Core Features" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-1-authentication-foundation-week-1">
<span class="md-ellipsis">
      
        Sprint 1: Authentication Foundation (Week 1)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-2-api-keys-user-context-week-2">
<span class="md-ellipsis">
      
        Sprint 2: API Keys &amp; User Context (Week 2)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-3-authorization-enforcement-week-3">
<span class="md-ellipsis">
      
        Sprint 3: Authorization Enforcement (Week 3)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-4-siem-integration-week-4">
<span class="md-ellipsis">
      
        Sprint 4: SIEM Integration (Week 4)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-5-api-enhancements-week-5">
<span class="md-ellipsis">
      
        Sprint 5: API Enhancements (Week 5)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-6-health-checks-testing-week-6">
<span class="md-ellipsis">
      
        Sprint 6: Health Checks &amp; Testing (Week 6)
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-3-production-polish-deployment">
<span class="md-ellipsis">
      
        Phase 3: Production Polish &amp; Deployment
      
    </span>
</a>
<nav aria-label="Phase 3: Production Polish &amp; Deployment" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-7-8-web-ui-week-7-8">
<span class="md-ellipsis">
      
        Sprint 7-8: Web UI (Week 7-8)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-9-cli-documentation-week-8-9">
<span class="md-ellipsis">
      
        Sprint 9: CLI &amp; Documentation (Week 8-9)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-10-pilot-week-10">
<span class="md-ellipsis">
      
        Sprint 10: Pilot (Week 10)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-11-12-production-launch-week-11-12">
<span class="md-ellipsis">
      
        Sprint 11-12: Production Launch (Week 11-12)
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#task-dependencies-diagram">
<span class="md-ellipsis">
      
        Task Dependencies Diagram
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#effort-summary">
<span class="md-ellipsis">
      
        Effort Summary
      
    </span>
</a>
<nav aria-label="Effort Summary" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-2-breakdown">
<span class="md-ellipsis">
      
        Phase 2 Breakdown
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#related-documentation">
<span class="md-ellipsis">
      
        Related Documentation
      
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<nav aria-label="Navigation" class="md-path">
<ol class="md-path__list">
<li class="md-path__item">
<a class="md-path__link" href="..">
<span class="md-ellipsis">
    Home
  </span>
</a>
</li>
<li class="md-path__item">
<a class="md-path__link" href="../EXECUTIVE_SUMMARY/">
<span class="md-ellipsis">
    Reports
  </span>
</a>
</li>
</ol>
</nav>
<article class="md-content__inner md-typeset">
<h1 id="sark-implementation-plan-detailed-task-breakdown">SARK Implementation Plan - Detailed Task Breakdown<a class="headerlink" href="#sark-implementation-plan-detailed-task-breakdown" title="Permanent link">¶</a></h1>
<p><strong>Document Version:</strong> 1.0
<strong>Last Updated:</strong> 2025-11-20
<strong>Purpose:</strong> Granular task breakdown with dependencies, effort estimates, and assignees</p>
<hr/>
<h2 id="how-to-use-this-document">How to Use This Document<a class="headerlink" href="#how-to-use-this-document" title="Permanent link">¶</a></h2>
<p>This implementation plan breaks down the <a href="../ROADMAP/">ROADMAP.md</a> into specific, actionable tasks with:
- <strong>Effort Estimates:</strong> Story points (1-13 Fibonacci scale) and days
- <strong>Dependencies:</strong> What must be complete before this task starts
- <strong>Assignees:</strong> Suggested role or team member
- <strong>Acceptance Criteria:</strong> Clear definition of done
- <strong>Files Involved:</strong> Specific code locations</p>
<p><strong>Story Point Scale:</strong>
- 1 point = 0.5 day (simple, clear task)
- 2 points = 1 day (straightforward implementation)
- 3 points = 1.5 days (moderate complexity)
- 5 points = 2-3 days (complex, requires design)
- 8 points = 4-5 days (very complex, multiple components)
- 13 points = 1+ week (should be broken down further)</p>
<hr/>
<h2 id="phase-2-security-hardening-core-features">Phase 2: Security Hardening &amp; Core Features<a class="headerlink" href="#phase-2-security-hardening-core-features" title="Permanent link">¶</a></h2>
<h3 id="sprint-1-authentication-foundation-week-1">Sprint 1: Authentication Foundation (Week 1)<a class="headerlink" href="#sprint-1-authentication-foundation-week-1" title="Permanent link">¶</a></h3>
<h4 id="task-101-jwt-middleware-implementation">TASK-101: JWT Middleware Implementation<a class="headerlink" href="#task-101-jwt-middleware-implementation" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P0 - Critical Blocker
<strong>Effort:</strong> 3 points (1.5 days)
<strong>Assignee:</strong> Senior Backend Engineer
<strong>Dependencies:</strong> None</p>
<p><strong>Description:</strong>
Implement JWT token extraction and validation middleware for all API endpoints.</p>
<p><strong>Implementation Details:</strong>
1. Create middleware in <code>src/sark/api/middleware/auth.py</code>
2. Support RS256 (asymmetric) and HS256 (symmetric) algorithms
3. Extract token from <code>Authorization: Bearer &lt;token&gt;</code> header
4. Validate token signature, expiry, and required claims
5. Attach user identity to request context
6. Handle token validation errors with proper HTTP status codes</p>
<p><strong>Files to Create/Modify:</strong>
- <code>src/sark/api/middleware/auth.py</code> (new)
- <code>src/sark/api/main.py</code> (modify - add middleware)
- <code>src/sark/config/settings.py</code> (modify - add JWT config)
- <code>tests/test_auth_middleware.py</code> (new)</p>
<p><strong>Acceptance Criteria:</strong>
- [ ] JWT tokens extracted from Authorization header
- [ ] RS256 and HS256 algorithms supported
- [ ] Token expiry validated (returns 401 if expired)
- [ ] Invalid signatures rejected (returns 401)
- [ ] User identity attached to <code>request.state.user</code>
- [ ] 100% test coverage for middleware
- [ ] Comprehensive error messages for debugging</p>
<p><strong>Configuration Required:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="n">JWT_SECRET_KEY</span> <span class="o">=</span> <span class="s2">"..."</span>  <span class="c1"># For HS256</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="n">JWT_PUBLIC_KEY</span> <span class="o">=</span> <span class="s2">"..."</span>  <span class="c1"># For RS256 (PEM format)</span>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="n">JWT_ALGORITHM</span> <span class="o">=</span> <span class="s2">"RS256"</span>  <span class="c1"># or HS256</span>
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="n">JWT_EXPIRATION_MINUTES</span> <span class="o">=</span> <span class="mi">60</span>
</span></code></pre></div></p>
<hr/>
<h4 id="task-102-token-refresh-mechanism">TASK-102: Token Refresh Mechanism<a class="headerlink" href="#task-102-token-refresh-mechanism" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P1 - High
<strong>Effort:</strong> 2 points (1 day)
<strong>Assignee:</strong> Backend Engineer
<strong>Dependencies:</strong> TASK-101</p>
<p><strong>Description:</strong>
Implement token refresh endpoint to allow clients to obtain new access tokens using refresh tokens.</p>
<p><strong>Implementation Details:</strong>
1. Create refresh token endpoint <code>POST /api/v1/auth/refresh</code>
2. Validate refresh token (longer expiry than access token)
3. Issue new access token with fresh expiry
4. Optionally rotate refresh token
5. Store refresh tokens in Redis with TTL
6. Implement refresh token revocation</p>
<p><strong>Files to Create/Modify:</strong>
- <code>src/sark/api/routers/auth.py</code> (new)
- <code>src/sark/services/auth/tokens.py</code> (new)
- <code>tests/test_token_refresh.py</code> (new)</p>
<p><strong>Acceptance Criteria:</strong>
- [ ] Refresh endpoint accepts refresh tokens
- [ ] New access token issued with valid claims
- [ ] Refresh tokens stored in Redis
- [ ] Expired refresh tokens rejected
- [ ] Revoked tokens cannot be used
- [ ] Refresh token rotation optional (configurable)
- [ ] Test coverage 100%</p>
<p><strong>Configuration:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="n">REFRESH_TOKEN_EXPIRATION_DAYS</span> <span class="o">=</span> <span class="mi">7</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="n">REFRESH_TOKEN_ROTATION_ENABLED</span> <span class="o">=</span> <span class="kc">True</span>
</span></code></pre></div></p>
<hr/>
<h4 id="task-103-ldapactive-directory-integration">TASK-103: LDAP/Active Directory Integration<a class="headerlink" href="#task-103-ldapactive-directory-integration" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P0 - Critical Blocker
<strong>Effort:</strong> 5 points (2.5 days)
<strong>Assignee:</strong> Senior Backend Engineer
<strong>Dependencies:</strong> TASK-101</p>
<p><strong>Description:</strong>
Implement LDAP/Active Directory authentication connector for enterprise SSO.</p>
<p><strong>Implementation Details:</strong>
1. Create LDAP connector in <code>src/sark/services/auth/providers/ldap.py</code>
2. Support LDAP and LDAPS protocols
3. Implement user authentication via LDAP bind
4. Extract user attributes (email, name, groups)
5. Map LDAP groups to SARK roles
6. Connection pooling for performance
7. Handle LDAP connection errors gracefully</p>
<p><strong>Files to Create/Modify:</strong>
- <code>src/sark/services/auth/providers/ldap.py</code> (new)
- <code>src/sark/services/auth/providers/__init__.py</code> (new)
- <code>src/sark/config/settings.py</code> (modify - LDAP config)
- <code>tests/test_ldap_auth.py</code> (new)</p>
<p><strong>Dependencies (Python packages):</strong>
- <code>ldap3&gt;=2.9.1</code></p>
<p><strong>Acceptance Criteria:</strong>
- [ ] LDAP bind authentication works
- [ ] User attributes extracted (email, name, groups)
- [ ] LDAP groups mapped to SARK roles
- [ ] Connection pooling implemented
- [ ] LDAPS (SSL/TLS) supported
- [ ] Timeout handling (5 second default)
- [ ] Comprehensive error handling
- [ ] Mock LDAP server used in tests
- [ ] Test coverage 90%+</p>
<p><strong>Configuration:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="n">LDAP_ENABLED</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="n">LDAP_SERVER</span> <span class="o">=</span> <span class="s2">"ldaps://ldap.example.com:636"</span>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="n">LDAP_BIND_DN</span> <span class="o">=</span> <span class="s2">"cn=sark,ou=service,dc=example,dc=com"</span>
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="n">LDAP_BIND_PASSWORD</span> <span class="o">=</span> <span class="s2">"..."</span>
</span><span id="__span-2-5"><a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="n">LDAP_USER_BASE_DN</span> <span class="o">=</span> <span class="s2">"ou=users,dc=example,dc=com"</span>
</span><span id="__span-2-6"><a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="n">LDAP_GROUP_BASE_DN</span> <span class="o">=</span> <span class="s2">"ou=groups,dc=example,dc=com"</span>
</span><span id="__span-2-7"><a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="n">LDAP_USER_FILTER</span> <span class="o">=</span> <span class="s2">"(uid=</span><span class="si">{username}</span><span class="s2">)"</span>
</span><span id="__span-2-8"><a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="n">LDAP_GROUP_FILTER</span> <span class="o">=</span> <span class="s2">"(member=</span><span class="si">{user_dn}</span><span class="s2">)"</span>
</span></code></pre></div></p>
<hr/>
<h4 id="task-104-saml-20-authentication">TASK-104: SAML 2.0 Authentication<a class="headerlink" href="#task-104-saml-20-authentication" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P1 - High
<strong>Effort:</strong> 8 points (4 days)
<strong>Assignee:</strong> Senior Backend Engineer
<strong>Dependencies:</strong> TASK-101</p>
<p><strong>Description:</strong>
Implement SAML 2.0 Service Provider (SP) for enterprise SSO with SAML Identity Providers.</p>
<p><strong>Implementation Details:</strong>
1. Create SAML SP connector in <code>src/sark/services/auth/providers/saml.py</code>
2. Support SP-initiated and IdP-initiated SSO flows
3. Generate and validate SAML assertions
4. Implement Single Logout (SLO)
5. Support multiple IdP configurations
6. Extract user attributes from SAML assertions
7. Map SAML attributes to SARK user model</p>
<p><strong>Files to Create/Modify:</strong>
- <code>src/sark/services/auth/providers/saml.py</code> (new)
- <code>src/sark/api/routers/auth_saml.py</code> (new - SAML endpoints)
- <code>src/sark/config/saml/</code> (new - SAML metadata)
- <code>tests/test_saml_auth.py</code> (new)</p>
<p><strong>SAML Endpoints:</strong>
- <code>GET /api/v1/auth/saml/metadata</code> - SP metadata
- <code>POST /api/v1/auth/saml/acs</code> - Assertion Consumer Service
- <code>GET /api/v1/auth/saml/login</code> - Initiate SSO
- <code>POST /api/v1/auth/saml/logout</code> - Single Logout</p>
<p><strong>Dependencies (Python packages):</strong>
- <code>python3-saml&gt;=1.15.0</code></p>
<p><strong>Acceptance Criteria:</strong>
- [ ] SP metadata generated correctly
- [ ] SP-initiated SSO flow works
- [ ] IdP-initiated SSO flow works
- [ ] SAML assertions validated (signature, expiry)
- [ ] User attributes extracted from assertions
- [ ] Single Logout (SLO) functional
- [ ] Multiple IdP configurations supported
- [ ] Mock IdP used in tests
- [ ] Test coverage 85%+</p>
<p><strong>Configuration:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="n">SAML_ENABLED</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="n">SAML_ENTITY_ID</span> <span class="o">=</span> <span class="s2">"https://sark.example.com/saml/metadata"</span>
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="n">SAML_ACS_URL</span> <span class="o">=</span> <span class="s2">"https://sark.example.com/api/v1/auth/saml/acs"</span>
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="n">SAML_SLO_URL</span> <span class="o">=</span> <span class="s2">"https://sark.example.com/api/v1/auth/saml/logout"</span>
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="n">SAML_IDP_METADATA_URL</span> <span class="o">=</span> <span class="s2">"https://idp.example.com/metadata"</span>
</span><span id="__span-3-6"><a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="n">SAML_ATTRIBUTE_MAPPING</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-3-7"><a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a>    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"urn:oid:0.9.2342.19200300.100.1.3"</span><span class="p">,</span>
</span><span id="__span-3-8"><a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a>    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"urn:oid:2.5.4.3"</span><span class="p">,</span>
</span><span id="__span-3-9"><a href="#__codelineno-3-9" id="__codelineno-3-9" name="__codelineno-3-9"></a>    <span class="s2">"groups"</span><span class="p">:</span> <span class="s2">"urn:oid:1.3.6.1.4.1.5923.1.5.1.1"</span>
</span><span id="__span-3-10"><a href="#__codelineno-3-10" id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="p">}</span>
</span></code></pre></div></p>
<hr/>
<h4 id="task-105-oidc-openid-connect-integration">TASK-105: OIDC (OpenID Connect) Integration<a class="headerlink" href="#task-105-oidc-openid-connect-integration" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P1 - High
<strong>Effort:</strong> 5 points (2.5 days)
<strong>Assignee:</strong> Backend Engineer
<strong>Dependencies:</strong> TASK-101</p>
<p><strong>Description:</strong>
Implement OpenID Connect (OIDC) authentication for modern cloud identity providers.</p>
<p><strong>Implementation Details:</strong>
1. Create OIDC connector in <code>src/sark/services/auth/providers/oidc.py</code>
2. Implement authorization code flow
3. Support PKCE (Proof Key for Code Exchange)
4. Discover IdP configuration via <code>.well-known/openid-configuration</code>
5. Validate ID tokens (signature, nonce, expiry)
6. Extract user info from ID token and UserInfo endpoint
7. Support multiple OIDC providers (Azure AD, Okta, Google, etc.)</p>
<p><strong>Files to Create/Modify:</strong>
- <code>src/sark/services/auth/providers/oidc.py</code> (new)
- <code>src/sark/api/routers/auth_oidc.py</code> (new)
- <code>tests/test_oidc_auth.py</code> (new)</p>
<p><strong>OIDC Endpoints:</strong>
- <code>GET /api/v1/auth/oidc/login</code> - Initiate OIDC flow
- <code>GET /api/v1/auth/oidc/callback</code> - OIDC callback</p>
<p><strong>Dependencies (Python packages):</strong>
- <code>authlib&gt;=1.2.0</code></p>
<p><strong>Acceptance Criteria:</strong>
- [ ] Authorization code flow implemented
- [ ] PKCE supported for security
- [ ] IdP discovery working (<code>.well-known/openid-configuration</code>)
- [ ] ID token validation (signature, nonce, expiry)
- [ ] User info extracted from ID token
- [ ] UserInfo endpoint queried if needed
- [ ] Multiple OIDC providers supported
- [ ] Mock OIDC provider used in tests
- [ ] Test coverage 90%+</p>
<p><strong>Configuration:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="n">OIDC_ENABLED</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="n">OIDC_DISCOVERY_URL</span> <span class="o">=</span> <span class="s2">"https://idp.example.com/.well-known/openid-configuration"</span>
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="n">OIDC_CLIENT_ID</span> <span class="o">=</span> <span class="s2">"sark-client-id"</span>
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="n">OIDC_CLIENT_SECRET</span> <span class="o">=</span> <span class="s2">"..."</span>
</span><span id="__span-4-5"><a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="n">OIDC_REDIRECT_URI</span> <span class="o">=</span> <span class="s2">"https://sark.example.com/api/v1/auth/oidc/callback"</span>
</span><span id="__span-4-6"><a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="n">OIDC_SCOPES</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"openid"</span><span class="p">,</span> <span class="s2">"profile"</span><span class="p">,</span> <span class="s2">"email"</span><span class="p">,</span> <span class="s2">"groups"</span><span class="p">]</span>
</span></code></pre></div></p>
<hr/>
<h3 id="sprint-2-api-keys-user-context-week-2">Sprint 2: API Keys &amp; User Context (Week 2)<a class="headerlink" href="#sprint-2-api-keys-user-context-week-2" title="Permanent link">¶</a></h3>
<h4 id="task-201-api-key-management-system">TASK-201: API Key Management System<a class="headerlink" href="#task-201-api-key-management-system" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P1 - High
<strong>Effort:</strong> 5 points (2.5 days)
<strong>Assignee:</strong> Backend Engineer
<strong>Dependencies:</strong> TASK-101</p>
<p><strong>Description:</strong>
Implement API key generation, storage, rotation, and validation for programmatic access.</p>
<p><strong>Implementation Details:</strong>
1. Create API key model with scopes and metadata
2. Generate cryptographically secure API keys
3. Store hashed API keys in database (never plaintext)
4. Implement API key validation in auth middleware
5. Support scope-based permissions (read, write, admin)
6. API key rotation mechanism
7. API key revocation
8. Rate limiting per API key</p>
<p><strong>Files to Create/Modify:</strong>
- <code>src/sark/models/api_key.py</code> (new)
- <code>src/sark/services/auth/api_keys.py</code> (new)
- <code>src/sark/api/routers/api_keys.py</code> (new)
- <code>src/sark/api/middleware/auth.py</code> (modify - add API key validation)
- <code>tests/test_api_keys.py</code> (new)
- <code>alembic/versions/xxx_add_api_keys.py</code> (new migration)</p>
<p><strong>API Endpoints:</strong>
- <code>POST /api/v1/api-keys</code> - Create new API key
- <code>GET /api/v1/api-keys</code> - List user's API keys
- <code>GET /api/v1/api-keys/{id}</code> - Get API key details
- <code>PUT /api/v1/api-keys/{id}/rotate</code> - Rotate API key
- <code>DELETE /api/v1/api-keys/{id}</code> - Revoke API key</p>
<p><strong>Acceptance Criteria:</strong>
- [ ] API keys generated with cryptographic randomness (32+ bytes)
- [ ] API keys hashed before storage (bcrypt or argon2)
- [ ] API key validation in middleware (&lt;10ms)
- [ ] Scope-based permissions enforced
- [ ] API key rotation preserves old key for grace period (24h)
- [ ] Revoked API keys rejected immediately
- [ ] Rate limiting: 1000 requests/minute per API key
- [ ] Audit logging for API key creation/rotation/revocation
- [ ] Test coverage 95%+</p>
<p><strong>Database Schema:</strong>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">api_keys</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="n">UUID</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">    </span><span class="n">user_id</span><span class="w"> </span><span class="n">UUID</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">users</span><span class="p">(</span><span class="n">id</span><span class="p">),</span>
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">    </span><span class="n">key_hash</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">    </span><span class="n">scopes</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">[]</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">    </span><span class="n">last_used_at</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">,</span>
</span><span id="__span-5-8"><a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">    </span><span class="n">expires_at</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">,</span>
</span><span id="__span-5-9"><a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="w">    </span><span class="n">created_at</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
</span><span id="__span-5-10"><a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">    </span><span class="n">revoked_at</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="p">,</span>
</span><span id="__span-5-11"><a href="#__codelineno-5-11" id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="w">    </span><span class="k">UNIQUE</span><span class="p">(</span><span class="n">key_hash</span><span class="p">)</span>
</span><span id="__span-5-12"><a href="#__codelineno-5-12" id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="p">);</span>
</span></code></pre></div></p>
<hr/>
<h4 id="task-202-user-context-service">TASK-202: User Context Service<a class="headerlink" href="#task-202-user-context-service" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P0 - Critical Blocker
<strong>Effort:</strong> 3 points (1.5 days)
<strong>Assignee:</strong> Backend Engineer
<strong>Dependencies:</strong> TASK-103, TASK-104, TASK-105</p>
<p><strong>Description:</strong>
Extract and aggregate user context (roles, teams, permissions) from identity providers.</p>
<p><strong>Implementation Details:</strong>
1. Create user context service in <code>src/sark/services/auth/user_context.py</code>
2. Extract user roles from identity provider (LDAP groups, SAML attributes, OIDC claims)
3. Resolve team membership from organizational directory
4. Aggregate permissions from roles
5. Cache user context in Redis (15 minute TTL)
6. Implement context refresh on role changes
7. Provide context to OPA policy evaluations</p>
<p><strong>Files to Create/Modify:</strong>
- <code>src/sark/services/auth/user_context.py</code> (new)
- <code>src/sark/models/user.py</code> (modify - add roles, teams)
- <code>src/sark/api/dependencies.py</code> (new - get_current_user dependency)
- <code>tests/test_user_context.py</code> (new)
- <code>alembic/versions/xxx_add_user_roles.py</code> (new migration)</p>
<p><strong>Acceptance Criteria:</strong>
- [ ] User roles extracted from identity provider
- [ ] Team membership resolved correctly
- [ ] Permissions aggregated from roles
- [ ] User context cached in Redis
- [ ] Cache invalidation on role changes
- [ ] Context available via <code>request.state.user</code>
- [ ] Test coverage 90%+</p>
<p><strong>User Context Structure:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="nd">@dataclass</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="k">class</span><span class="w"> </span><span class="nc">UserContext</span><span class="p">:</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>    <span class="n">user_id</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>    <span class="n">email</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>    <span class="n">roles</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>  <span class="c1"># ["admin", "policy_author", "viewer"]</span>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a>    <span class="n">teams</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>  <span class="c1"># ["security", "engineering"]</span>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a>    <span class="n">permissions</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>  <span class="c1"># ["servers:write", "policy:read"]</span>
</span></code></pre></div></p>
<hr/>
<h4 id="task-203-replace-placeholder-authentication-in-api">TASK-203: Replace Placeholder Authentication in API<a class="headerlink" href="#task-203-replace-placeholder-authentication-in-api" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P0 - Critical Blocker
<strong>Effort:</strong> 2 points (1 day)
<strong>Assignee:</strong> Backend Engineer
<strong>Dependencies:</strong> TASK-101, TASK-202</p>
<p><strong>Description:</strong>
Remove all placeholder authentication code and replace with real user context extraction.</p>
<p><strong>Implementation Details:</strong>
1. Remove hardcoded <code>user_id="system"</code> in <code>src/sark/api/routers/servers.py:72</code>
2. Use <code>request.state.user</code> from authentication middleware
3. Extract real user information for audit logs
4. Ensure all API endpoints require authentication
5. Update API tests to use authentication</p>
<p><strong>Files to Modify:</strong>
- <code>src/sark/api/routers/servers.py</code> (lines 72, 77, etc.)
- <code>src/sark/api/routers/policy.py</code> (lines 54-55, 60, 64)
- <code>tests/test_api_servers.py</code> (add authentication)
- <code>tests/test_api_policy.py</code> (add authentication)</p>
<p><strong>Acceptance Criteria:</strong>
- [ ] No hardcoded user IDs in codebase
- [ ] All endpoints extract user from <code>request.state.user</code>
- [ ] Unauthenticated requests return 401
- [ ] Audit logs contain real user information
- [ ] All API tests updated with authentication
- [ ] Test coverage maintained at 85%+</p>
<hr/>
<h3 id="sprint-3-authorization-enforcement-week-3">Sprint 3: Authorization Enforcement (Week 3)<a class="headerlink" href="#sprint-3-authorization-enforcement-week-3" title="Permanent link">¶</a></h3>
<h4 id="task-301-opa-authorization-checks-on-server-registration">TASK-301: OPA Authorization Checks on Server Registration<a class="headerlink" href="#task-301-opa-authorization-checks-on-server-registration" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P0 - Critical Blocker
<strong>Effort:</strong> 3 points (1.5 days)
<strong>Assignee:</strong> Senior Backend Engineer
<strong>Dependencies:</strong> TASK-202</p>
<p><strong>Description:</strong>
Enforce OPA policy evaluation on server registration endpoint.</p>
<p><strong>Implementation Details:</strong>
1. Modify <code>POST /api/v1/servers/</code> to call OPA before allowing registration
2. Build policy evaluation context with user, server metadata
3. Handle policy denials with clear error messages
4. Log authorization decisions to audit trail
5. Cache policy decisions (5 minute TTL)
6. Performance optimization (&lt;50ms policy evaluation)</p>
<p><strong>Files to Modify:</strong>
- <code>src/sark/api/routers/servers.py</code> (line 77 - enable authorization)
- <code>src/sark/services/policy/policy_service.py</code> (optimize)
- <code>tests/test_server_authorization.py</code> (new)</p>
<p><strong>Policy Context:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="p">{</span>
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a>    <span class="s2">"input"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a>        <span class="s2">"user"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a>            <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"user-123"</span><span class="p">,</span>
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a>            <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"alice@example.com"</span><span class="p">,</span>
</span><span id="__span-7-6"><a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a>            <span class="s2">"roles"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"engineer"</span><span class="p">],</span>
</span><span id="__span-7-7"><a href="#__codelineno-7-7" id="__codelineno-7-7" name="__codelineno-7-7"></a>            <span class="s2">"teams"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"security"</span><span class="p">]</span>
</span><span id="__span-7-8"><a href="#__codelineno-7-8" id="__codelineno-7-8" name="__codelineno-7-8"></a>        <span class="p">},</span>
</span><span id="__span-7-9"><a href="#__codelineno-7-9" id="__codelineno-7-9" name="__codelineno-7-9"></a>        <span class="s2">"action"</span><span class="p">:</span> <span class="s2">"server:register"</span><span class="p">,</span>
</span><span id="__span-7-10"><a href="#__codelineno-7-10" id="__codelineno-7-10" name="__codelineno-7-10"></a>        <span class="s2">"resource"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-7-11"><a href="#__codelineno-7-11" id="__codelineno-7-11" name="__codelineno-7-11"></a>            <span class="s2">"server_name"</span><span class="p">:</span> <span class="s2">"my-mcp-server"</span><span class="p">,</span>
</span><span id="__span-7-12"><a href="#__codelineno-7-12" id="__codelineno-7-12" name="__codelineno-7-12"></a>            <span class="s2">"sensitivity"</span><span class="p">:</span> <span class="s2">"high"</span><span class="p">,</span>
</span><span id="__span-7-13"><a href="#__codelineno-7-13" id="__codelineno-7-13" name="__codelineno-7-13"></a>            <span class="s2">"owner_team"</span><span class="p">:</span> <span class="s2">"security"</span>
</span><span id="__span-7-14"><a href="#__codelineno-7-14" id="__codelineno-7-14" name="__codelineno-7-14"></a>        <span class="p">},</span>
</span><span id="__span-7-15"><a href="#__codelineno-7-15" id="__codelineno-7-15" name="__codelineno-7-15"></a>        <span class="s2">"environment"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-7-16"><a href="#__codelineno-7-16" id="__codelineno-7-16" name="__codelineno-7-16"></a>            <span class="s2">"time"</span><span class="p">:</span> <span class="s2">"2025-11-20T10:00:00Z"</span><span class="p">,</span>
</span><span id="__span-7-17"><a href="#__codelineno-7-17" id="__codelineno-7-17" name="__codelineno-7-17"></a>            <span class="s2">"ip_address"</span><span class="p">:</span> <span class="s2">"10.0.0.1"</span>
</span><span id="__span-7-18"><a href="#__codelineno-7-18" id="__codelineno-7-18" name="__codelineno-7-18"></a>        <span class="p">}</span>
</span><span id="__span-7-19"><a href="#__codelineno-7-19" id="__codelineno-7-19" name="__codelineno-7-19"></a>    <span class="p">}</span>
</span><span id="__span-7-20"><a href="#__codelineno-7-20" id="__codelineno-7-20" name="__codelineno-7-20"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Acceptance Criteria:</strong>
- [ ] OPA policy called on every server registration
- [ ] Policy denials return 403 Forbidden
- [ ] Clear error message indicates policy violation
- [ ] Authorization decisions logged to audit trail
- [ ] Policy decisions cached for performance
- [ ] Policy evaluation time &lt;50ms (p95)
- [ ] Negative test cases (unauthorized attempts)
- [ ] Test coverage 95%+</p>
<hr/>
<h4 id="task-302-tool-sensitivity-classification">TASK-302: Tool Sensitivity Classification<a class="headerlink" href="#task-302-tool-sensitivity-classification" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P1 - High
<strong>Effort:</strong> 5 points (2.5 days)
<strong>Assignee:</strong> Backend Engineer
<strong>Dependencies:</strong> None</p>
<p><strong>Description:</strong>
Implement tool registry with automatic sensitivity level detection and manual override.</p>
<p><strong>Implementation Details:</strong>
1. Create tool registry service
2. Automatic sensitivity detection based on:
   - Tool name patterns (e.g., "delete", "admin" → high)
   - Tool capabilities (write vs read)
   - Resource types (database, filesystem, network)
3. Manual override via API or configuration
4. Sensitivity levels: low, medium, high, critical
5. Store sensitivity in database with tools
6. Provide sensitivity to OPA policy evaluations</p>
<p><strong>Files to Create/Modify:</strong>
- <code>src/sark/services/discovery/tool_registry.py</code> (new)
- <code>src/sark/models/mcp_server.py</code> (modify - add sensitivity to tools)
- <code>src/sark/api/routers/tools.py</code> (new - tool management)
- <code>tests/test_tool_sensitivity.py</code> (new)
- <code>alembic/versions/xxx_add_tool_sensitivity.py</code> (new migration)</p>
<p><strong>Sensitivity Detection Rules:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="n">SENSITIVITY_PATTERNS</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a>    <span class="s2">"critical"</span><span class="p">:</span> <span class="p">[</span><span class="sa">r</span><span class="s2">".*delete.*"</span><span class="p">,</span> <span class="sa">r</span><span class="s2">".*admin.*"</span><span class="p">,</span> <span class="sa">r</span><span class="s2">".*sudo.*"</span><span class="p">],</span>
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a>    <span class="s2">"high"</span><span class="p">:</span> <span class="p">[</span><span class="sa">r</span><span class="s2">".*write.*"</span><span class="p">,</span> <span class="sa">r</span><span class="s2">".*create.*"</span><span class="p">,</span> <span class="sa">r</span><span class="s2">".*modify.*"</span><span class="p">],</span>
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a>    <span class="s2">"medium"</span><span class="p">:</span> <span class="p">[</span><span class="sa">r</span><span class="s2">".*read.*"</span><span class="p">,</span> <span class="sa">r</span><span class="s2">".*list.*"</span><span class="p">,</span> <span class="sa">r</span><span class="s2">".*get.*"</span><span class="p">],</span>
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a>    <span class="s2">"low"</span><span class="p">:</span> <span class="p">[</span><span class="sa">r</span><span class="s2">".*info.*"</span><span class="p">,</span> <span class="sa">r</span><span class="s2">".*help.*"</span><span class="p">,</span> <span class="sa">r</span><span class="s2">".*ping.*"</span><span class="p">]</span>
</span><span id="__span-8-6"><a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>API Endpoints:</strong>
- <code>GET /api/v1/tools</code> - List tools with sensitivity
- <code>PUT /api/v1/tools/{id}/sensitivity</code> - Override sensitivity</p>
<p><strong>Acceptance Criteria:</strong>
- [ ] Automatic sensitivity detection working
- [ ] Manual sensitivity override via API
- [ ] Sensitivity levels stored in database
- [ ] Sensitivity included in policy context
- [ ] 90%+ accuracy on sensitivity detection
- [ ] Audit logging for sensitivity changes
- [ ] Test coverage 90%+</p>
<hr/>
<h4 id="task-303-default-policy-library">TASK-303: Default Policy Library<a class="headerlink" href="#task-303-default-policy-library" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P0 - Critical Blocker
<strong>Effort:</strong> 5 points (2.5 days)
<strong>Assignee:</strong> Security Engineer + Backend Engineer
<strong>Dependencies:</strong> TASK-301, TASK-302</p>
<p><strong>Description:</strong>
Create production-ready default OPA policies for common authorization scenarios.</p>
<p><strong>Implementation Details:</strong>
1. Define default policies in <code>opa/policies/defaults/</code>
2. Implement ReBAC (Relationship-Based Access Control)
3. Implement ABAC (Attribute-Based Access Control)
4. Support environment-based policies (dev/staging/prod)
5. Policy versioning system
6. Policy testing framework
7. Policy documentation</p>
<p><strong>Policies to Implement:</strong></p>
<ol>
<li><strong>Server Registration Policy:</strong></li>
<li>Users can only register servers for their own teams</li>
<li>Admins can register servers for any team</li>
<li>
<p>High sensitivity servers require approval</p>
</li>
<li>
<p><strong>Tool Access Policy:</strong></p>
</li>
<li>Users can access tools based on sensitivity and role</li>
<li>Critical tools require admin role</li>
<li>
<p>High sensitivity tools require team membership</p>
</li>
<li>
<p><strong>Audit Log Access Policy:</strong></p>
</li>
<li>Users can view audit logs for their own actions</li>
<li>Team leads can view team audit logs</li>
<li>
<p>Admins can view all audit logs</p>
</li>
<li>
<p><strong>Policy Management Policy:</strong></p>
</li>
<li>Only policy authors can create/update policies</li>
<li>
<p>Only admins can deploy policies to production</p>
</li>
<li>
<p><strong>Time-based Access Policy:</strong></p>
</li>
<li>Restrict high sensitivity operations to business hours</li>
<li>Emergency override for on-call users</li>
</ol>
<p><strong>Files to Create:</strong>
- <code>opa/policies/defaults/server_registration.rego</code>
- <code>opa/policies/defaults/tool_access.rego</code>
- <code>opa/policies/defaults/audit_access.rego</code>
- <code>opa/policies/defaults/policy_management.rego</code>
- <code>opa/policies/defaults/time_based_access.rego</code>
- <code>opa/policies/tests/</code> (policy tests)
- <code>docs/policies/DEFAULT_POLICIES.md</code> (documentation)</p>
<p><strong>Acceptance Criteria:</strong>
- [ ] 5+ default policies implemented
- [ ] All policies tested with OPA test framework
- [ ] Policy test coverage 100%
- [ ] Policies documented with examples
- [ ] Environment-specific policy bundles (dev/staging/prod)
- [ ] Policy versioning implemented
- [ ] Policy deployment tested</p>
<p><strong>Example Policy:</strong>
<div class="language-rego highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="k">package</span><span class="w"> </span><span class="n">sark</span><span class="p">.</span><span class="n">server_registration</span>
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a>
</span><span id="__span-9-3"><a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="k">import</span><span class="w"> </span><span class="n">future</span><span class="p">.</span><span class="n">keywords</span>
</span><span id="__span-9-4"><a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a>
</span><span id="__span-9-5"><a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="k">default</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span>
</span><span id="__span-9-6"><a href="#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a>
</span><span id="__span-9-7"><a href="#__codelineno-9-7" id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="c1"># Allow if user is registering for their own team</span>
</span><span id="__span-9-8"><a href="#__codelineno-9-8" id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="n">allow</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-9"><a href="#__codelineno-9-9" id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="w">    </span><span class="nb">input</span><span class="p">.</span><span class="n">user</span><span class="p">.</span><span class="n">teams</span><span class="p">[</span><span class="n">_</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">input</span><span class="p">.</span><span class="n">resource</span><span class="p">.</span><span class="n">owner_team</span>
</span><span id="__span-9-10"><a href="#__codelineno-9-10" id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="w">    </span><span class="nb">input</span><span class="p">.</span><span class="n">resource</span><span class="p">.</span><span class="n">sensitivity</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s2">"critical"</span>
</span><span id="__span-9-11"><a href="#__codelineno-9-11" id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="p">}</span>
</span><span id="__span-9-12"><a href="#__codelineno-9-12" id="__codelineno-9-12" name="__codelineno-9-12"></a>
</span><span id="__span-9-13"><a href="#__codelineno-9-13" id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="c1"># Admins can register any server</span>
</span><span id="__span-9-14"><a href="#__codelineno-9-14" id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="n">allow</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-15"><a href="#__codelineno-9-15" id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="w">    </span><span class="nb">input</span><span class="p">.</span><span class="n">user</span><span class="p">.</span><span class="n">roles</span><span class="p">[</span><span class="n">_</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"admin"</span>
</span><span id="__span-9-16"><a href="#__codelineno-9-16" id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="p">}</span>
</span><span id="__span-9-17"><a href="#__codelineno-9-17" id="__codelineno-9-17" name="__codelineno-9-17"></a>
</span><span id="__span-9-18"><a href="#__codelineno-9-18" id="__codelineno-9-18" name="__codelineno-9-18"></a><span class="c1"># High sensitivity servers require approval</span>
</span><span id="__span-9-19"><a href="#__codelineno-9-19" id="__codelineno-9-19" name="__codelineno-9-19"></a><span class="n">allow</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-20"><a href="#__codelineno-9-20" id="__codelineno-9-20" name="__codelineno-9-20"></a><span class="w">    </span><span class="nb">input</span><span class="p">.</span><span class="n">resource</span><span class="p">.</span><span class="n">sensitivity</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"high"</span>
</span><span id="__span-9-21"><a href="#__codelineno-9-21" id="__codelineno-9-21" name="__codelineno-9-21"></a><span class="w">    </span><span class="nb">input</span><span class="p">.</span><span class="n">resource</span><span class="p">.</span><span class="n">approval_status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"approved"</span>
</span><span id="__span-9-22"><a href="#__codelineno-9-22" id="__codelineno-9-22" name="__codelineno-9-22"></a><span class="p">}</span>
</span></code></pre></div></p>
<hr/>
<h3 id="sprint-4-siem-integration-week-4">Sprint 4: SIEM Integration (Week 4)<a class="headerlink" href="#sprint-4-siem-integration-week-4" title="Permanent link">¶</a></h3>
<h4 id="task-401-siem-adapter-framework">TASK-401: SIEM Adapter Framework<a class="headerlink" href="#task-401-siem-adapter-framework" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P1 - High
<strong>Effort:</strong> 3 points (1.5 days)
<strong>Assignee:</strong> Backend Engineer
<strong>Dependencies:</strong> None</p>
<p><strong>Description:</strong>
Create abstract SIEM adapter framework for pluggable SIEM integrations.</p>
<p><strong>Implementation Details:</strong>
1. Define abstract <code>SIEMAdapter</code> interface
2. Implement retry logic with exponential backoff
3. Batch event forwarding (configurable batch size)
4. Dead letter queue for failed events (Kafka DLQ)
5. SIEM adapter registry
6. Health checks for SIEM connectivity
7. Metrics for SIEM forwarding (success rate, latency)</p>
<p><strong>Files to Create:</strong>
- <code>src/sark/services/audit/siem/base.py</code> (new - abstract adapter)
- <code>src/sark/services/audit/siem/registry.py</code> (new - adapter registry)
- <code>src/sark/workers/siem_forwarder.py</code> (new - background worker)
- <code>tests/test_siem_adapter.py</code> (new)</p>
<p><strong>SIEM Adapter Interface:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a>
</span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="k">class</span><span class="w"> </span><span class="nc">SIEMAdapter</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="__span-10-4"><a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a>    <span class="nd">@abstractmethod</span>
</span><span id="__span-10-5"><a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">AuditEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="__span-10-6"><a href="#__codelineno-10-6" id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">        </span><span class="sd">"""Send single audit event to SIEM"""</span>
</span><span id="__span-10-7"><a href="#__codelineno-10-7" id="__codelineno-10-7" name="__codelineno-10-7"></a>        <span class="k">pass</span>
</span><span id="__span-10-8"><a href="#__codelineno-10-8" id="__codelineno-10-8" name="__codelineno-10-8"></a>
</span><span id="__span-10-9"><a href="#__codelineno-10-9" id="__codelineno-10-9" name="__codelineno-10-9"></a>    <span class="nd">@abstractmethod</span>
</span><span id="__span-10-10"><a href="#__codelineno-10-10" id="__codelineno-10-10" name="__codelineno-10-10"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send_batch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">events</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AuditEvent</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="__span-10-11"><a href="#__codelineno-10-11" id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="w">        </span><span class="sd">"""Send batch of events, return success count"""</span>
</span><span id="__span-10-12"><a href="#__codelineno-10-12" id="__codelineno-10-12" name="__codelineno-10-12"></a>        <span class="k">pass</span>
</span><span id="__span-10-13"><a href="#__codelineno-10-13" id="__codelineno-10-13" name="__codelineno-10-13"></a>
</span><span id="__span-10-14"><a href="#__codelineno-10-14" id="__codelineno-10-14" name="__codelineno-10-14"></a>    <span class="nd">@abstractmethod</span>
</span><span id="__span-10-15"><a href="#__codelineno-10-15" id="__codelineno-10-15" name="__codelineno-10-15"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">health_check</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="__span-10-16"><a href="#__codelineno-10-16" id="__codelineno-10-16" name="__codelineno-10-16"></a><span class="w">        </span><span class="sd">"""Check SIEM connectivity"""</span>
</span><span id="__span-10-17"><a href="#__codelineno-10-17" id="__codelineno-10-17" name="__codelineno-10-17"></a>        <span class="k">pass</span>
</span></code></pre></div></p>
<p><strong>Acceptance Criteria:</strong>
- [ ] Abstract adapter interface defined
- [ ] Retry logic: exponential backoff (1s, 2s, 4s, 8s, max 5 retries)
- [ ] Batch forwarding: configurable batch size (default 100)
- [ ] Dead letter queue for failures (Kafka DLQ)
- [ ] Health check interface implemented
- [ ] Metrics exported (Prometheus)
- [ ] Test coverage 90%+</p>
<hr/>
<h4 id="task-402-splunk-integration">TASK-402: Splunk Integration<a class="headerlink" href="#task-402-splunk-integration" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P1 - High
<strong>Effort:</strong> 3 points (1.5 days)
<strong>Assignee:</strong> Backend Engineer
<strong>Dependencies:</strong> TASK-401</p>
<p><strong>Description:</strong>
Implement Splunk HTTP Event Collector (HEC) adapter for audit event forwarding.</p>
<p><strong>Implementation Details:</strong>
1. Create Splunk adapter implementing <code>SIEMAdapter</code>
2. Use Splunk HEC API for event ingestion
3. Support custom index and sourcetype
4. SSL/TLS certificate validation
5. Handle Splunk-specific errors
6. Support Splunk Cloud and Enterprise</p>
<p><strong>Files to Create:</strong>
- <code>src/sark/services/audit/siem/splunk.py</code> (new)
- <code>tests/test_splunk_adapter.py</code> (new)</p>
<p><strong>Dependencies (Python packages):</strong>
- <code>aiohttp&gt;=3.9.0</code></p>
<p><strong>Acceptance Criteria:</strong>
- [ ] Events sent to Splunk HEC successfully
- [ ] Custom index and sourcetype configurable
- [ ] SSL/TLS certificate validation working
- [ ] Splunk errors handled gracefully
- [ ] Connection pooling for performance
- [ ] Mock Splunk server used in tests
- [ ] Test coverage 90%+</p>
<p><strong>Configuration:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="n">SPLUNK_ENABLED</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-11-2"><a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="n">SPLUNK_HEC_URL</span> <span class="o">=</span> <span class="s2">"https://splunk.example.com:8088/services/collector/event"</span>
</span><span id="__span-11-3"><a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="n">SPLUNK_HEC_TOKEN</span> <span class="o">=</span> <span class="s2">"..."</span>
</span><span id="__span-11-4"><a href="#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="n">SPLUNK_INDEX</span> <span class="o">=</span> <span class="s2">"sark_audit"</span>
</span><span id="__span-11-5"><a href="#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="n">SPLUNK_SOURCETYPE</span> <span class="o">=</span> <span class="s2">"sark:audit:event"</span>
</span><span id="__span-11-6"><a href="#__codelineno-11-6" id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="n">SPLUNK_VERIFY_SSL</span> <span class="o">=</span> <span class="kc">True</span>
</span></code></pre></div></p>
<p><strong>Event Format:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="p">{</span>
</span><span id="__span-12-2"><a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="w">    </span><span class="nt">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1700000000</span><span class="p">,</span>
</span><span id="__span-12-3"><a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">    </span><span class="nt">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sark-api-01"</span><span class="p">,</span>
</span><span id="__span-12-4"><a href="#__codelineno-12-4" id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">    </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sark"</span><span class="p">,</span>
</span><span id="__span-12-5"><a href="#__codelineno-12-5" id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">    </span><span class="nt">"sourcetype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sark:audit:event"</span><span class="p">,</span>
</span><span id="__span-12-6"><a href="#__codelineno-12-6" id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="w">    </span><span class="nt">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sark_audit"</span><span class="p">,</span>
</span><span id="__span-12-7"><a href="#__codelineno-12-7" id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="w">    </span><span class="nt">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-8"><a href="#__codelineno-12-8" id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="w">        </span><span class="nt">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"server_registered"</span><span class="p">,</span>
</span><span id="__span-12-9"><a href="#__codelineno-12-9" id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="w">        </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user-123"</span><span class="p">,</span>
</span><span id="__span-12-10"><a href="#__codelineno-12-10" id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="w">        </span><span class="nt">"server_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"server-456"</span><span class="p">,</span>
</span><span id="__span-12-11"><a href="#__codelineno-12-11" id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="w">        </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-11-20T10:00:00Z"</span>
</span><span id="__span-12-12"><a href="#__codelineno-12-12" id="__codelineno-12-12" name="__codelineno-12-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-12-13"><a href="#__codelineno-12-13" id="__codelineno-12-13" name="__codelineno-12-13"></a><span class="p">}</span>
</span></code></pre></div></p>
<hr/>
<h4 id="task-403-datadog-integration">TASK-403: Datadog Integration<a class="headerlink" href="#task-403-datadog-integration" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P2 - Medium
<strong>Effort:</strong> 2 points (1 day)
<strong>Assignee:</strong> Backend Engineer
<strong>Dependencies:</strong> TASK-401</p>
<p><strong>Description:</strong>
Implement Datadog Logs API adapter for audit event forwarding.</p>
<p><strong>Implementation Details:</strong>
1. Create Datadog adapter implementing <code>SIEMAdapter</code>
2. Use Datadog Logs API
3. Tag events for categorization
4. Support Datadog regions (US, EU)
5. Handle Datadog rate limits</p>
<p><strong>Files to Create:</strong>
- <code>src/sark/services/audit/siem/datadog.py</code> (new)
- <code>tests/test_datadog_adapter.py</code> (new)</p>
<p><strong>Acceptance Criteria:</strong>
- [ ] Events sent to Datadog Logs API
- [ ] Events tagged appropriately
- [ ] Datadog regions supported (US/EU)
- [ ] Rate limiting handled
- [ ] Mock Datadog API used in tests
- [ ] Test coverage 90%+</p>
<p><strong>Configuration:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="n">DATADOG_ENABLED</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="n">DATADOG_API_KEY</span> <span class="o">=</span> <span class="s2">"..."</span>
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="n">DATADOG_APP_KEY</span> <span class="o">=</span> <span class="s2">"..."</span>
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="n">DATADOG_SITE</span> <span class="o">=</span> <span class="s2">"datadoghq.com"</span>  <span class="c1"># or "datadoghq.eu"</span>
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="n">DATADOG_SERVICE</span> <span class="o">=</span> <span class="s2">"sark"</span>
</span></code></pre></div></p>
<hr/>
<h4 id="task-404-background-siem-forwarder-worker">TASK-404: Background SIEM Forwarder Worker<a class="headerlink" href="#task-404-background-siem-forwarder-worker" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P1 - High
<strong>Effort:</strong> 5 points (2.5 days)
<strong>Assignee:</strong> Senior Backend Engineer
<strong>Dependencies:</strong> TASK-401, TASK-402, TASK-403</p>
<p><strong>Description:</strong>
Implement background worker to consume audit events from Kafka and forward to SIEM.</p>
<p><strong>Implementation Details:</strong>
1. Kafka consumer for <code>audit-events</code> topic
2. Parallel processing with configurable workers
3. Batch processing for efficiency
4. Error handling with DLQ
5. Graceful shutdown
6. Consumer offset management
7. Monitoring and metrics</p>
<p><strong>Files to Create:</strong>
- <code>src/sark/workers/siem_forwarder.py</code> (new)
- <code>src/sark/workers/__init__.py</code> (new)
- <code>scripts/run_siem_forwarder.sh</code> (new)
- <code>k8s/siem-forwarder-deployment.yaml</code> (new)
- <code>tests/test_siem_forwarder.py</code> (new)</p>
<p><strong>Acceptance Criteria:</strong>
- [ ] Consumes events from Kafka topic
- [ ] Forwards events to configured SIEM(s)
- [ ] Batch processing: 100 events per batch
- [ ] Parallel workers: configurable (default 4)
- [ ] Failed events sent to DLQ
- [ ] Graceful shutdown on SIGTERM
- [ ] Metrics: events processed, success rate, latency
- [ ] Consumer offset committed on success
- [ ] Test coverage 85%+</p>
<p><strong>Metrics:</strong>
- <code>siem_events_processed_total{siem="splunk",status="success"}</code>
- <code>siem_forwarding_duration_seconds{siem="splunk"}</code>
- <code>siem_batch_size{siem="splunk"}</code></p>
<hr/>
<h3 id="sprint-5-api-enhancements-week-5">Sprint 5: API Enhancements (Week 5)<a class="headerlink" href="#sprint-5-api-enhancements-week-5" title="Permanent link">¶</a></h3>
<h4 id="task-501-api-pagination-implementation">TASK-501: API Pagination Implementation<a class="headerlink" href="#task-501-api-pagination-implementation" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P2 - Medium
<strong>Effort:</strong> 3 points (1.5 days)
<strong>Assignee:</strong> Backend Engineer
<strong>Dependencies:</strong> None</p>
<p><strong>Description:</strong>
Implement cursor-based pagination for server listing and other list endpoints.</p>
<p><strong>Implementation Details:</strong>
1. Implement cursor-based pagination (not offset-based for performance)
2. Pagination parameters: <code>cursor</code>, <code>limit</code> (default 50, max 200)
3. Return pagination metadata: <code>next_cursor</code>, <code>has_more</code>, <code>total_count</code>
4. Consistent ordering for pagination (by <code>created_at</code>, <code>id</code>)
5. Apply to all list endpoints</p>
<p><strong>Files to Modify:</strong>
- <code>src/sark/api/routers/servers.py</code> (line 171 - add pagination)
- <code>src/sark/api/pagination.py</code> (new - pagination utilities)
- <code>src/sark/api/routers/audit.py</code> (add pagination)
- <code>tests/test_pagination.py</code> (new)</p>
<p><strong>API Request:</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a>GET /api/v1/servers?limit=50&amp;cursor=eyJpZCI6MTIzfQ==
</span></code></pre></div></p>
<p><strong>API Response:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="p">{</span>
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="w">    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span>
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="w">    </span><span class="nt">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-4"><a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="w">        </span><span class="nt">"next_cursor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJpZCI6MTczfQ=="</span><span class="p">,</span>
</span><span id="__span-15-5"><a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="w">        </span><span class="nt">"has_more"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-15-6"><a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="w">        </span><span class="nt">"total_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span>
</span><span id="__span-15-7"><a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-8"><a href="#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Acceptance Criteria:</strong>
- [ ] Cursor-based pagination on <code>/api/v1/servers</code>
- [ ] Configurable page size (default 50, max 200)
- [ ] Pagination metadata in response
- [ ] Consistent ordering (created_at, id)
- [ ] Performance: &lt;100ms for 10,000+ servers
- [ ] Test with large datasets (10,000+ records)
- [ ] Test coverage 95%+</p>
<hr/>
<h4 id="task-502-search-filtering">TASK-502: Search &amp; Filtering<a class="headerlink" href="#task-502-search-filtering" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P2 - Medium
<strong>Effort:</strong> 5 points (2.5 days)
<strong>Assignee:</strong> Backend Engineer
<strong>Dependencies:</strong> TASK-501</p>
<p><strong>Description:</strong>
Implement search and filtering capabilities for server listing.</p>
<p><strong>Implementation Details:</strong>
1. Full-text search on server name and description (PostgreSQL <code>ts_vector</code>)
2. Filter by: team, sensitivity, status, tags
3. Combined filters with AND/OR logic
4. Efficient database indexes
5. Search result ranking</p>
<p><strong>Files to Create/Modify:</strong>
- <code>src/sark/services/discovery/search.py</code> (new)
- <code>src/sark/api/routers/servers.py</code> (modify - add search params)
- <code>alembic/versions/xxx_add_search_indexes.py</code> (new migration)
- <code>tests/test_search.py</code> (new)</p>
<p><strong>Search API:</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a>GET /api/v1/servers?q=mcp&amp;team=security&amp;sensitivity=high&amp;status=active
</span></code></pre></div></p>
<p><strong>Acceptance Criteria:</strong>
- [ ] Full-text search on name and description
- [ ] Filter by team, sensitivity, status, tags
- [ ] Combined filters work (AND/OR logic)
- [ ] Database indexes created for performance
- [ ] Search response time &lt;100ms
- [ ] Pagination works with search
- [ ] Test coverage 90%+</p>
<p><strong>Database Indexes:</strong>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-17-1"><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">idx_servers_search</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">mcp_servers</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="n">gin</span><span class="p">(</span><span class="n">to_tsvector</span><span class="p">(</span><span class="s1">'english'</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">' '</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">description</span><span class="p">));</span>
</span><span id="__span-17-2"><a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">idx_servers_team</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">mcp_servers</span><span class="p">(</span><span class="n">team_id</span><span class="p">);</span>
</span><span id="__span-17-3"><a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">idx_servers_sensitivity</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">mcp_servers</span><span class="p">(</span><span class="n">sensitivity</span><span class="p">);</span>
</span></code></pre></div></p>
<hr/>
<h4 id="task-503-bulk-operations">TASK-503: Bulk Operations<a class="headerlink" href="#task-503-bulk-operations" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P2 - Medium
<strong>Effort:</strong> 3 points (1.5 days)
<strong>Assignee:</strong> Backend Engineer
<strong>Dependencies:</strong> None</p>
<p><strong>Description:</strong>
Implement bulk operations for server registration, updates, and policy evaluation.</p>
<p><strong>Implementation Details:</strong>
1. Bulk server registration (up to 100 servers)
2. Bulk status updates
3. Batch policy evaluation
4. Validation before processing
5. Partial success handling (return successes and failures)
6. Transaction safety</p>
<p><strong>Files to Create:</strong>
- <code>src/sark/api/routers/bulk.py</code> (new)
- <code>src/sark/services/bulk_operations.py</code> (new)
- <code>tests/test_bulk_operations.py</code> (new)</p>
<p><strong>Bulk Endpoints:</strong>
- <code>POST /api/v1/bulk/servers</code> - Bulk register servers
- <code>PUT /api/v1/bulk/servers/status</code> - Bulk update status
- <code>POST /api/v1/bulk/policy/evaluate</code> - Batch policy evaluation</p>
<p><strong>Request Format:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-18-1"><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="p">{</span>
</span><span id="__span-18-2"><a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="w">    </span><span class="nt">"servers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-18-3"><a href="#__codelineno-18-3" id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="w">        </span><span class="p">{</span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"server1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"team"</span><span class="p">:</span><span class="w"> </span><span class="s2">"security"</span><span class="p">},</span>
</span><span id="__span-18-4"><a href="#__codelineno-18-4" id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="w">        </span><span class="p">{</span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"server2"</span><span class="p">,</span><span class="w"> </span><span class="nt">"team"</span><span class="p">:</span><span class="w"> </span><span class="s2">"engineering"</span><span class="p">}</span>
</span><span id="__span-18-5"><a href="#__codelineno-18-5" id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="w">    </span><span class="p">]</span>
</span><span id="__span-18-6"><a href="#__codelineno-18-6" id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Response Format:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-19-1"><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="p">{</span>
</span><span id="__span-19-2"><a href="#__codelineno-19-2" id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="w">    </span><span class="nt">"success_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">98</span><span class="p">,</span>
</span><span id="__span-19-3"><a href="#__codelineno-19-3" id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="w">    </span><span class="nt">"failure_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
</span><span id="__span-19-4"><a href="#__codelineno-19-4" id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w">    </span><span class="nt">"successes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span>
</span><span id="__span-19-5"><a href="#__codelineno-19-5" id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="w">    </span><span class="nt">"failures"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-19-6"><a href="#__codelineno-19-6" id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="w">        </span><span class="p">{</span><span class="nt">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Server name already exists"</span><span class="p">},</span>
</span><span id="__span-19-7"><a href="#__codelineno-19-7" id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="w">        </span><span class="p">{</span><span class="nt">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Authorization denied"</span><span class="p">}</span>
</span><span id="__span-19-8"><a href="#__codelineno-19-8" id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="w">    </span><span class="p">]</span>
</span><span id="__span-19-9"><a href="#__codelineno-19-9" id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Acceptance Criteria:</strong>
- [ ] Bulk registration supports 100+ servers
- [ ] Partial success handled gracefully
- [ ] Validation before processing
- [ ] Transaction safety (rollback on critical errors)
- [ ] Performance: &lt;5 seconds for 100 servers
- [ ] Test coverage 90%+</p>
<hr/>
<h3 id="sprint-6-health-checks-testing-week-6">Sprint 6: Health Checks &amp; Testing (Week 6)<a class="headerlink" href="#sprint-6-health-checks-testing-week-6" title="Permanent link">¶</a></h3>
<h4 id="task-601-dependency-health-checks">TASK-601: Dependency Health Checks<a class="headerlink" href="#task-601-dependency-health-checks" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P1 - High
<strong>Effort:</strong> 3 points (1.5 days)
<strong>Assignee:</strong> Backend Engineer
<strong>Dependencies:</strong> None</p>
<p><strong>Description:</strong>
Implement comprehensive dependency health checks for all external services.</p>
<p><strong>Implementation Details:</strong>
1. PostgreSQL connection check with timeout
2. Redis connectivity verification
3. OPA endpoint health check
4. Consul service status
5. Vault seal status check
6. Kafka broker connectivity
7. Aggregate health status</p>
<p><strong>Files to Modify:</strong>
- <code>src/sark/api/routers/health.py</code> (line 50 - implement checks)
- <code>src/sark/services/health/</code> (new - health check services)
- <code>tests/test_health_checks.py</code> (new)</p>
<p><strong>Health Check Response:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-20-1"><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="p">{</span>
</span><span id="__span-20-2"><a href="#__codelineno-20-2" id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="w">    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"healthy"</span><span class="p">,</span>
</span><span id="__span-20-3"><a href="#__codelineno-20-3" id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="w">    </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span>
</span><span id="__span-20-4"><a href="#__codelineno-20-4" id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="w">    </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-11-20T10:00:00Z"</span><span class="p">,</span>
</span><span id="__span-20-5"><a href="#__codelineno-20-5" id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="w">    </span><span class="nt">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-6"><a href="#__codelineno-20-6" id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="w">        </span><span class="nt">"database"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"healthy"</span><span class="p">,</span><span class="w"> </span><span class="nt">"latency_ms"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">},</span>
</span><span id="__span-20-7"><a href="#__codelineno-20-7" id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="w">        </span><span class="nt">"redis"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"healthy"</span><span class="p">,</span><span class="w"> </span><span class="nt">"latency_ms"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">},</span>
</span><span id="__span-20-8"><a href="#__codelineno-20-8" id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="w">        </span><span class="nt">"opa"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"healthy"</span><span class="p">,</span><span class="w"> </span><span class="nt">"latency_ms"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">},</span>
</span><span id="__span-20-9"><a href="#__codelineno-20-9" id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="w">        </span><span class="nt">"consul"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"healthy"</span><span class="p">},</span>
</span><span id="__span-20-10"><a href="#__codelineno-20-10" id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="w">        </span><span class="nt">"vault"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"healthy"</span><span class="p">,</span><span class="w"> </span><span class="nt">"sealed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">},</span>
</span><span id="__span-20-11"><a href="#__codelineno-20-11" id="__codelineno-20-11" name="__codelineno-20-11"></a><span class="w">        </span><span class="nt">"kafka"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"healthy"</span><span class="p">}</span>
</span><span id="__span-20-12"><a href="#__codelineno-20-12" id="__codelineno-20-12" name="__codelineno-20-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-20-13"><a href="#__codelineno-20-13" id="__codelineno-20-13" name="__codelineno-20-13"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Acceptance Criteria:</strong>
- [ ] All dependencies checked
- [ ] Health check completes in &lt;1 second
- [ ] Degraded status if non-critical dependency fails
- [ ] Unhealthy status if critical dependency fails
- [ ] Latency metrics included
- [ ] Test with mock dependencies
- [ ] Test coverage 95%+</p>
<hr/>
<h4 id="task-602-kubernetes-probes-configuration">TASK-602: Kubernetes Probes Configuration<a class="headerlink" href="#task-602-kubernetes-probes-configuration" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P1 - High
<strong>Effort:</strong> 2 points (1 day)
<strong>Assignee:</strong> DevOps Engineer
<strong>Dependencies:</strong> TASK-601</p>
<p><strong>Description:</strong>
Configure Kubernetes liveness, readiness, and startup probes correctly.</p>
<p><strong>Implementation Details:</strong>
1. <code>/live</code> - Liveness probe (basic process check)
2. <code>/ready</code> - Readiness probe (dependencies ready)
3. <code>/startup</code> - Startup probe (initialization complete)
4. Configure probe timeouts and thresholds
5. Test probe behavior in Kubernetes</p>
<p><strong>Files to Modify:</strong>
- <code>k8s/deployment.yaml</code> (update probes)
- <code>helm/sark/templates/deployment.yaml</code> (update probes)
- <code>src/sark/api/routers/health.py</code> (implement probe endpoints)</p>
<p><strong>Kubernetes Configuration:</strong>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-21-1"><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="nt">livenessProbe</span><span class="p">:</span>
</span><span id="__span-21-2"><a href="#__codelineno-21-2" id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="w">  </span><span class="nt">httpGet</span><span class="p">:</span>
</span><span id="__span-21-3"><a href="#__codelineno-21-3" id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/live</span>
</span><span id="__span-21-4"><a href="#__codelineno-21-4" id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8000</span>
</span><span id="__span-21-5"><a href="#__codelineno-21-5" id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="w">  </span><span class="nt">initialDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</span><span id="__span-21-6"><a href="#__codelineno-21-6" id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="w">  </span><span class="nt">periodSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</span><span id="__span-21-7"><a href="#__codelineno-21-7" id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="w">  </span><span class="nt">timeoutSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id="__span-21-8"><a href="#__codelineno-21-8" id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="w">  </span><span class="nt">failureThreshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id="__span-21-9"><a href="#__codelineno-21-9" id="__codelineno-21-9" name="__codelineno-21-9"></a>
</span><span id="__span-21-10"><a href="#__codelineno-21-10" id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="nt">readinessProbe</span><span class="p">:</span>
</span><span id="__span-21-11"><a href="#__codelineno-21-11" id="__codelineno-21-11" name="__codelineno-21-11"></a><span class="w">  </span><span class="nt">httpGet</span><span class="p">:</span>
</span><span id="__span-21-12"><a href="#__codelineno-21-12" id="__codelineno-21-12" name="__codelineno-21-12"></a><span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/ready</span>
</span><span id="__span-21-13"><a href="#__codelineno-21-13" id="__codelineno-21-13" name="__codelineno-21-13"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8000</span>
</span><span id="__span-21-14"><a href="#__codelineno-21-14" id="__codelineno-21-14" name="__codelineno-21-14"></a><span class="w">  </span><span class="nt">initialDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-21-15"><a href="#__codelineno-21-15" id="__codelineno-21-15" name="__codelineno-21-15"></a><span class="w">  </span><span class="nt">periodSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-21-16"><a href="#__codelineno-21-16" id="__codelineno-21-16" name="__codelineno-21-16"></a><span class="w">  </span><span class="nt">timeoutSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span><span id="__span-21-17"><a href="#__codelineno-21-17" id="__codelineno-21-17" name="__codelineno-21-17"></a><span class="w">  </span><span class="nt">failureThreshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span><span id="__span-21-18"><a href="#__codelineno-21-18" id="__codelineno-21-18" name="__codelineno-21-18"></a>
</span><span id="__span-21-19"><a href="#__codelineno-21-19" id="__codelineno-21-19" name="__codelineno-21-19"></a><span class="nt">startupProbe</span><span class="p">:</span>
</span><span id="__span-21-20"><a href="#__codelineno-21-20" id="__codelineno-21-20" name="__codelineno-21-20"></a><span class="w">  </span><span class="nt">httpGet</span><span class="p">:</span>
</span><span id="__span-21-21"><a href="#__codelineno-21-21" id="__codelineno-21-21" name="__codelineno-21-21"></a><span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/startup</span>
</span><span id="__span-21-22"><a href="#__codelineno-21-22" id="__codelineno-21-22" name="__codelineno-21-22"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8000</span>
</span><span id="__span-21-23"><a href="#__codelineno-21-23" id="__codelineno-21-23" name="__codelineno-21-23"></a><span class="w">  </span><span class="nt">initialDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
</span><span id="__span-21-24"><a href="#__codelineno-21-24" id="__codelineno-21-24" name="__codelineno-21-24"></a><span class="w">  </span><span class="nt">periodSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-21-25"><a href="#__codelineno-21-25" id="__codelineno-21-25" name="__codelineno-21-25"></a><span class="w">  </span><span class="nt">timeoutSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span><span id="__span-21-26"><a href="#__codelineno-21-26" id="__codelineno-21-26" name="__codelineno-21-26"></a><span class="w">  </span><span class="nt">failureThreshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span><span class="w">  </span><span class="c1"># 150 seconds max startup time</span>
</span></code></pre></div></p>
<p><strong>Acceptance Criteria:</strong>
- [ ] Liveness probe fails only on process crash
- [ ] Readiness probe fails if dependencies unhealthy
- [ ] Startup probe succeeds after initialization
- [ ] Probes tested in Kubernetes cluster
- [ ] No false positives
- [ ] Documentation updated</p>
<hr/>
<h4 id="task-603-unit-test-expansion">TASK-603: Unit Test Expansion<a class="headerlink" href="#task-603-unit-test-expansion" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P0 - Critical (Quality Gate)
<strong>Effort:</strong> 8 points (4 days)
<strong>Assignee:</strong> All Engineers
<strong>Dependencies:</strong> All Phase 2 features complete</p>
<p><strong>Description:</strong>
Expand unit test coverage to achieve 85%+ overall coverage.</p>
<p><strong>Implementation Details:</strong>
1. Identify untested code paths
2. Write unit tests for all new features
3. Mock external dependencies
4. Test edge cases and error handling
5. Refactor for testability if needed</p>
<p><strong>Coverage Targets by Module:</strong>
- <code>api/</code> - 90%+
- <code>services/auth/</code> - 95%+
- <code>services/policy/</code> - 90%+
- <code>services/discovery/</code> - 85%+
- <code>services/audit/</code> - 90%+
- <code>models/</code> - 100%
- Overall: 85%+</p>
<p><strong>Acceptance Criteria:</strong>
- [ ] Overall coverage ≥85%
- [ ] All critical paths tested
- [ ] Edge cases covered
- [ ] Error handling tested
- [ ] Mock external dependencies
- [ ] Fast test suite (&lt;60 seconds)</p>
<hr/>
<h4 id="task-604-integration-tests">TASK-604: Integration Tests<a class="headerlink" href="#task-604-integration-tests" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P0 - Critical (Quality Gate)
<strong>Effort:</strong> 8 points (4 days)
<strong>Assignee:</strong> QA Engineer + Backend Engineer
<strong>Dependencies:</strong> All Phase 2 features complete</p>
<p><strong>Description:</strong>
Create comprehensive integration test suite with real database and dependencies.</p>
<p><strong>Implementation Details:</strong>
1. End-to-end API tests with real PostgreSQL
2. Authentication flow integration tests
3. Authorization flow integration tests
4. Audit logging integration tests
5. OPA policy evaluation tests
6. SIEM forwarding tests
7. Database migration tests</p>
<p><strong>Test Scenarios:</strong>
1. User registration → authentication → server registration → audit event
2. Policy denial → audit event → SIEM forwarding
3. API key creation → API request with key → rate limiting
4. Server registration → tool discovery → sensitivity classification
5. Database migration → rollback</p>
<p><strong>Acceptance Criteria:</strong>
- [ ] 20+ end-to-end scenarios tested
- [ ] All critical workflows tested
- [ ] Real database used (test container)
- [ ] Real Redis used (test container)
- [ ] Mock OPA used
- [ ] Mock SIEM used
- [ ] Test suite runs in &lt;5 minutes
- [ ] Cleanup after tests</p>
<hr/>
<h4 id="task-605-performance-tests">TASK-605: Performance Tests<a class="headerlink" href="#task-605-performance-tests" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P1 - High (Quality Gate)
<strong>Effort:</strong> 5 points (2.5 days)
<strong>Assignee:</strong> Performance Engineer
<strong>Dependencies:</strong> TASK-603, TASK-604</p>
<p><strong>Description:</strong>
Execute performance tests to validate targets are met.</p>
<p><strong>Implementation Details:</strong>
1. Load test: 1000 requests/second sustained
2. Stress test: Find maximum capacity
3. Spike test: Handle sudden traffic increases
4. Endurance test: 24 hour stability
5. Scalability test: Performance with 10,000+ servers</p>
<p><strong>Tools:</strong>
- Locust or k6 for load testing
- Prometheus for metrics collection
- Grafana for visualization</p>
<p><strong>Performance Targets:</strong>
- API response time (p95): &lt;100ms
- Server registration: &lt;200ms
- Policy evaluation: &lt;50ms
- Database queries: &lt;20ms
- Concurrent users: 1000+
- Throughput: 10,000 events/second</p>
<p><strong>Acceptance Criteria:</strong>
- [ ] All performance targets met
- [ ] Load test report generated
- [ ] Bottlenecks identified and optimized
- [ ] Performance regression tests automated</p>
<hr/>
<h4 id="task-606-security-testing">TASK-606: Security Testing<a class="headerlink" href="#task-606-security-testing" title="Permanent link">¶</a></h4>
<p><strong>Priority:</strong> P0 - Critical (Quality Gate)
<strong>Effort:</strong> 5 points (2.5 days)
<strong>Assignee:</strong> Security Engineer
<strong>Dependencies:</strong> All Phase 2 features complete</p>
<p><strong>Description:</strong>
Execute comprehensive security testing to identify vulnerabilities.</p>
<p><strong>Implementation Details:</strong>
1. OWASP Top 10 vulnerability scanning
2. Dependency vulnerability checks (Snyk/Trivy)
3. Secrets scanning (TruffleHog)
4. SQL injection testing
5. XSS testing
6. CSRF testing
7. Command injection testing
8. Authentication bypass attempts
9. Authorization bypass attempts</p>
<p><strong>Tools:</strong>
- Bandit (Python SAST)
- Trivy (container scanning)
- Snyk (dependency scanning)
- OWASP ZAP (DAST)
- TruffleHog (secrets)</p>
<p><strong>Acceptance Criteria:</strong>
- [ ] Zero P0/P1 vulnerabilities
- [ ] All P2 vulnerabilities documented with mitigation
- [ ] No secrets in codebase or git history
- [ ] Security scan reports generated
- [ ] Remediation plan for P2/P3 issues</p>
<hr/>
<h2 id="phase-3-production-polish-deployment">Phase 3: Production Polish &amp; Deployment<a class="headerlink" href="#phase-3-production-polish-deployment" title="Permanent link">¶</a></h2>
<h3 id="sprint-7-8-web-ui-week-7-8">Sprint 7-8: Web UI (Week 7-8)<a class="headerlink" href="#sprint-7-8-web-ui-week-7-8" title="Permanent link">¶</a></h3>
<p>(Tasks 701-709 for Web UI development - detailed in <a href="../ROADMAP/">ROADMAP.md</a>)</p>
<h3 id="sprint-9-cli-documentation-week-8-9">Sprint 9: CLI &amp; Documentation (Week 8-9)<a class="headerlink" href="#sprint-9-cli-documentation-week-8-9" title="Permanent link">¶</a></h3>
<p>(Tasks 801-806 for CLI tool and documentation - detailed in <a href="../ROADMAP/">ROADMAP.md</a>)</p>
<h3 id="sprint-10-pilot-week-10">Sprint 10: Pilot (Week 10)<a class="headerlink" href="#sprint-10-pilot-week-10" title="Permanent link">¶</a></h3>
<p>(Tasks 901-905 for pilot program - detailed in <a href="../ROADMAP/">ROADMAP.md</a>)</p>
<h3 id="sprint-11-12-production-launch-week-11-12">Sprint 11-12: Production Launch (Week 11-12)<a class="headerlink" href="#sprint-11-12-production-launch-week-11-12" title="Permanent link">¶</a></h3>
<p>(Tasks 1001-1006 for production deployment - detailed in <a href="../ROADMAP/">ROADMAP.md</a>)</p>
<hr/>
<h2 id="task-dependencies-diagram">Task Dependencies Diagram<a class="headerlink" href="#task-dependencies-diagram" title="Permanent link">¶</a></h2>
<div class="mermaid">graph TD
    TASK101[JWT Middleware] --&gt; TASK102[Token Refresh]
    TASK101 --&gt; TASK103[LDAP Auth]
    TASK101 --&gt; TASK104[SAML Auth]
    TASK101 --&gt; TASK105[OIDC Auth]
    TASK101 --&gt; TASK201[API Keys]

    TASK103 --&gt; TASK202[User Context]
    TASK104 --&gt; TASK202
    TASK105 --&gt; TASK202

    TASK101 --&gt; TASK203[Remove Placeholders]
    TASK202 --&gt; TASK203

    TASK202 --&gt; TASK301[OPA Authorization]
    TASK302[Tool Sensitivity] --&gt; TASK303[Default Policies]
    TASK301 --&gt; TASK303

    TASK401[SIEM Framework] --&gt; TASK402[Splunk]
    TASK401 --&gt; TASK403[Datadog]
    TASK402 --&gt; TASK404[SIEM Worker]
    TASK403 --&gt; TASK404

    TASK501[Pagination] --&gt; TASK502[Search]

    TASK601[Health Checks] --&gt; TASK602[K8s Probes]

    TASK301 --&gt; TASK603[Unit Tests]
    TASK303 --&gt; TASK603
    TASK404 --&gt; TASK603
    TASK502 --&gt; TASK603
    TASK503[Bulk Ops] --&gt; TASK603

    TASK603 --&gt; TASK604[Integration Tests]
    TASK604 --&gt; TASK605[Performance Tests]
    TASK604 --&gt; TASK606[Security Tests]
</div>
<hr/>
<h2 id="effort-summary">Effort Summary<a class="headerlink" href="#effort-summary" title="Permanent link">¶</a></h2>
<h3 id="phase-2-breakdown">Phase 2 Breakdown<a class="headerlink" href="#phase-2-breakdown" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th>Sprint</th>
<th>Tasks</th>
<th>Story Points</th>
<th>Days</th>
<th>Engineers</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sprint 1</td>
<td>5</td>
<td>23</td>
<td>11.5</td>
<td>2</td>
</tr>
<tr>
<td>Sprint 2</td>
<td>3</td>
<td>10</td>
<td>5</td>
<td>2</td>
</tr>
<tr>
<td>Sprint 3</td>
<td>3</td>
<td>13</td>
<td>6.5</td>
<td>2</td>
</tr>
<tr>
<td>Sprint 4</td>
<td>4</td>
<td>13</td>
<td>6.5</td>
<td>1</td>
</tr>
<tr>
<td>Sprint 5</td>
<td>3</td>
<td>11</td>
<td>5.5</td>
<td>1</td>
</tr>
<tr>
<td>Sprint 6</td>
<td>6</td>
<td>31</td>
<td>15.5</td>
<td>3</td>
</tr>
<tr>
<td><strong>Total</strong></td>
<td><strong>24</strong></td>
<td><strong>101</strong></td>
<td><strong>50.5</strong></td>
<td><strong>2-3 avg</strong></td>
</tr>
</tbody>
</table>
<p><strong>Phase 2 Duration:</strong> 6 weeks (allowing buffer for issues)</p>
<hr/>
<h2 id="related-documentation">Related Documentation<a class="headerlink" href="#related-documentation" title="Permanent link">¶</a></h2>
<ul>
<li><strong><a href="../ROADMAP/">ROADMAP.md</a></strong> - High-level roadmap and timeline</li>
<li><strong><a href="../PRODUCTION_READINESS/">PRODUCTION_READINESS.md</a></strong> - Production readiness checklist</li>
<li><strong><a href="../ARCHITECTURE/">ARCHITECTURE.md</a></strong> - System architecture</li>
<li><strong><a href="../DEVELOPMENT/">DEVELOPMENT.md</a></strong> - Development setup</li>
</ul>
<hr/>
<p><strong>Document Control</strong></p>
<table>
<thead>
<tr>
<th>Version</th>
<th>Date</th>
<th>Author</th>
<th>Changes</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.0</td>
<td>2025-11-20</td>
<td>SARK Team</td>
<td>Initial implementation plan</td>
</tr>
</tbody>
</table>
<p><strong>Review Schedule:</strong> Weekly sprint planning</p>
<p><strong>Next Review:</strong> Start of Sprint 1</p>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2025 James Henry. All rights reserved.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/apathy-ca/sark" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.path", "navigation.top", "navigation.indexes", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.annotate", "content.tabs.link", "toc.follow"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
<script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
mermaid.initialize({});</script></body>
</html>